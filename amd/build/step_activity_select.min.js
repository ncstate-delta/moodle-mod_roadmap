define ("mod_roadmap/step_activity_select",["jquery","core/notification","core/templates","core/ajax","mod_roadmap/dialogue"],function(a,b,c,d,e){var f=function(){};f.prototype.rebind_checkbox=function(){a(".chk-single-activity-link").unbind("click").each(function(b,c){var d=a(c).data("stepid");a("#step-"+d+"-single-activity-link").prop("disabled",a(c).prop("checked"));a(c).click(function(){var b=a(this).data("stepid");a("#step-"+b+"-single-activity-link").prop("disabled",a(this).prop("checked"))})});a(".completion-modules").unbind("change").each(function(a,b){f.prototype.configure_checkbox(b)})};f.prototype.configure_checkbox=function(b){var c=a(b).data("stepid"),d=1<a("#step-"+c+"-completion-modules").val().split(",").length;a("#step-"+c+"-chk-single-activity-link").prop("disabled",d);if(d){a("#step-"+c+"-chk-single-activity-link").prop("checked",!d);a("#step-"+c+"-single-activity-link").prop("disabled",!d)}};f.prototype.rebind_buttons=function(){a(".btn_completion_selector").unbind("click").click(this.showConfig.bind(this))};f.prototype.showConfig=function(d){var f=this,g=JSON.parse(a("input[name=\"activity_data\"]").val());f.clickedButton=d.target;c.render("mod_roadmap/configuration_activityselect",g).done(function(a){new e("Select Activities for Step Completion",a,f.initActivityConfig.bind(f))}).fail(b.exception)};f.prototype.initActivityConfig=function(b){this.popup=b;var c=a(b.getContent());c.on("click","[data-action=\"save\"]",function(){var c=a("#step-activity-selector option:selected").toArray().map(function(a){return a.value}).join(","),d=a("#step-activity-selector option:selected").toArray().map(function(a){return"<li>"+a.text+"</li>"}).join(""),e=a(this.clickedButton).data("stepid");a("input[name=\"step-"+e+"-completion-modules\"]").val(c);f.prototype.configure_checkbox(a("input[name=\"step-"+e+"-completion-modules\"]"));a("#step-"+e+"-completion-list").children("li").remove();a("#step-"+e+"-completion-list").append(d).trigger("change");b.close()}.bind(this));c.on("click","[data-action=\"cancel\"]",function(){b.close()})};return{init:function init(){return new f},rebind_buttons:function rebind_buttons(){f.prototype.rebind_buttons();f.prototype.rebind_checkbox()}}});
//# sourceMappingURL=step_activity_select.min.js.map
