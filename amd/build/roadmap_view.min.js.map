{"version":3,"file":"roadmap_view.min.js","sources":["../src/roadmap_view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the view of the course roadmap.\n *\n * @module     mod_roadmap/roadmapview\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'],\n    function($) {\n\n        /**\n         * Roadmap view helper object.\n         */\n        var RoadmapView = function() {\n            // Get progress, normalized\n\n            // For each step icon, light up the ring according the progress.\n            $('li.roadmap span.bg').each(function() {\n               var p = $(this).data('progress');\n\n                // Clamp progress. Sanity check, can't be less than zero and more than one.\n                if (p < 0) {\n                    p = 0;\n                }\n                if (p > 1) {\n                    p = 1;\n                }\n\n                // Find the progress circle around the step icon\n                var circle = $(this).find('.roadmap-circle-progress')[0];\n\n                // Get radius, calculate circumference\n                var r = circle.getAttribute('r');\n                var c = Math.PI * r * 2;\n\n                // Draw the stroke according to the progress.\n                circle.setAttribute('stroke-dashoffset', c - (c * p));\n            });\n\n            // Collapsing phase functions.\n            $('h2.roadmap-phase-title').each(function() {\n                $(this).click(function() {\n                    var cc = $(this).closest('.roadmap-phase').find('.roadmap-cycle-container');\n                    cc.toggle();\n\n                    var ind = $(this).find('.roadmap-phase-progress-indicators');\n                    ind.toggle();\n                });\n            });\n        };\n\n        return {\n\n            /**\n             * Main initialisation.\n             *\n             * @return {RoadmapView} A new instance of the Roadmap Helper object.\n             * @method init\n             */\n            init: function() {\n                return new RoadmapView();\n            }\n        };\n    });\n"],"names":["define","$","RoadmapView","each","p","this","data","circle","find","r","getAttribute","c","Math","PI","setAttribute","click","closest","toggle","init"],"mappings":";;;;;;;AAsBAA,kCAAO,CAAC,WACJ,SAASC,OAKDC,YAAc,WAIdD,EAAE,sBAAsBE,MAAK,eACtBC,EAAIH,EAAEI,MAAMC,KAAK,YAGhBF,EAAI,IACJA,EAAI,GAEJA,EAAI,IACJA,EAAI,OAIJG,OAASN,EAAEI,MAAMG,KAAK,4BAA4B,GAGlDC,EAAIF,OAAOG,aAAa,KACxBC,EAAIC,KAAKC,GAAKJ,EAAI,EAGtBF,OAAOO,aAAa,oBAAqBH,EAAKA,EAAIP,MAItDH,EAAE,0BAA0BE,MAAK,WAC7BF,EAAEI,MAAMU,OAAM,WACDd,EAAEI,MAAMW,QAAQ,kBAAkBR,KAAK,4BAC7CS,SAEOhB,EAAEI,MAAMG,KAAK,sCACnBS,sBAKT,CAQHC,KAAM,kBACK,IAAIhB"}