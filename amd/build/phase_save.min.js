/**
 * Handle opening a dialogue to configure scale data.
 *
 * @module     mod_roadmap/stepiconselect
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/phase_save",["jquery"],(function($){var PhaseSave=function(){};return PhaseSave.prototype.rebind_inputs=function(){$(".phase-title").unbind("change").change(this.savePhase.bind(this)),$(".phase-cycles-container .cycle-wrapper .cycle-configuration").unbind("change").change(this.savePhase.bind(this)),PhaseSave.prototype.savePhase(this)},PhaseSave.prototype.savePhase=function(event){var phaseContainer=$(event.target).closest(".phase-container"),phaseCycles=[];let index=0;$.each(phaseContainer.find(".phase-cycles-container .cycle-wrapper .cycle-configuration"),(function(){let cycleData=$(this).val();""==cycleData&&(cycleData="{}");let cycleDataObj=JSON.parse(cycleData);cycleDataObj.index=index,index+=1,phaseCycles.push(cycleDataObj)}));let title=phaseContainer.find(".fitem input.phase-title").val();var phaseData={id:phaseContainer.closest(".phase-wrapper").data("phaseid"),title:title,cycles:phaseCycles};phaseContainer.closest(".phase-wrapper").find(".phase-header-title").html(title),phaseContainer.children("input.phase-configuration").val(JSON.stringify(phaseData)).triggerHandler("change")},{init:function(){return new PhaseSave},rebind_inputs:function(){PhaseSave.prototype.rebind_inputs()}}}));

//# sourceMappingURL=phase_save.min.js.map