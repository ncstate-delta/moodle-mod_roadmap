/**
 * Handle the saving of phase data and rebinding of inputs.
 *
 * @module     mod_roadmap/phase_save
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/phase_save",["jquery"],(function($){const instance=new class{rebindInputs(){$(".phase-title").off("change").on("change",this.savePhase.bind(this)),$(".phase-cycles-container .cycle-wrapper .cycle-configuration").off("change").on("change",this.savePhase.bind(this)),$(".phase-container").each(((_,el)=>{this.savePhase({target:el})}))}savePhase(event){const phaseContainer=$(event.target).closest(".phase-container"),phaseCycles=[];let index=0;phaseContainer.find(".phase-cycles-container .cycle-wrapper .cycle-configuration").each((function(){let cycleData=$(this).val()||"{}",cycleDataObj=JSON.parse(cycleData);cycleDataObj.index=index++,phaseCycles.push(cycleDataObj)}));const title=phaseContainer.find(".fitem input.phase-title").val(),phaseData={id:phaseContainer.closest(".phase-wrapper").data("phaseid"),title:title,cycles:phaseCycles};phaseContainer.closest(".phase-wrapper").find(".phase-header-title").html(title),phaseContainer.children("input.phase-configuration").val(JSON.stringify(phaseData)).triggerHandler("change")}};return{init:function(){return instance},rebindInputs:function(){instance.rebindInputs()}}}));

//# sourceMappingURL=phase_save.min.js.map