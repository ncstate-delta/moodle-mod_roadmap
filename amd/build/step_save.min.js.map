{"version":3,"sources":["../src/step_save.js"],"names":["define","$","StepSave","prototype","rebind_inputs","unbind","change","saveStep","bind","event","stepContainer","target","closest","expectedComplete","find","prop","stepData","rollovertext","val","stepicon","completionmodules","linksingleactivity","pagelink","expectedcomplete","completionexpected_day","completionexpected_month","completionexpected_year","completionexpected_hour","completionexpected_minute","days","months","years","hours","minutes","children","JSON","stringify","triggerHandler","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure scale data.\n *\n * @module     mod_roadmap/stepiconselect\n * @package    mod_roadmap\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'],\n    function($) {\n\n        var StepSave = function() {\n\n        };\n\n        StepSave.prototype.rebind_inputs = function() {\n            $('.step-rollovertext').unbind('change').change(this.saveStep.bind(this));\n            $('.chk-single-activity-link').unbind('change').change(this.saveStep.bind(this));\n            $('.step-single-activity-link').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_day').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_month').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_year').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_hour').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_minute').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected').unbind('change').change(this.saveStep.bind(this));\n            $('.step-icon').unbind('change').change(this.saveStep.bind(this));\n            $('.step-completion-modules').unbind('change').change(this.saveStep.bind(this));\n            StepSave.prototype.saveStep(this);\n        };\n\n        StepSave.prototype.saveStep = function(event) {\n            var stepContainer = $(event.target).closest('.step-container');\n            var expectedComplete = 0;\n            if(stepContainer.find('.completionexpected').prop(\"checked\") == true){\n                expectedComplete = 1;\n            }\n            var stepData = {\n                rollovertext: stepContainer.find('.fitem input.step-rollovertext').val(),\n                stepicon: stepContainer.find('.fitem input.step-icon').val(),\n                completionmodules: stepContainer.find('.fitem input.step-completion-modules').val(),\n                linksingleactivity: stepContainer.find('.fitem input.chk-single-activity-link').val(),\n                pagelink: stepContainer.find('.fitem input.step-single-activity-link').val(),\n                expectedcomplete: expectedComplete,\n                completionexpected_day: stepContainer.find('.fitem select.completionexpected_day').val(),\n                completionexpected_month: stepContainer.find('.fitem select.completionexpected_month').val(),\n                completionexpected_year: stepContainer.find('.fitem select.completionexpected_year').val(),\n                completionexpected_hour: stepContainer.find('.fitem select.completionexpected_hour').val(),\n                completionexpected_minute: stepContainer.find('.fitem select.completionexpected_minute').val(),\n            };\n            delete stepData.days;\n            delete stepData.months;\n            delete stepData.years;\n            delete stepData.hours;\n            delete stepData.minutes;\n            stepContainer.children('input.step-configuration').val(JSON.stringify(stepData)).triggerHandler(\"change\");\n        };\n\n        return {\n\n            init: function() {\n                return new StepSave();\n            },\n\n            rebind_inputs: function() {\n                StepSave.prototype.rebind_inputs();\n            }\n        };\n    });"],"file":"step_save.min.js"}