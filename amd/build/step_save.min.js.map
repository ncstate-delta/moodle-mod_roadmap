{"version":3,"file":"step_save.min.js","sources":["../src/step_save.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure scale data.\n *\n * @module     mod_roadmap/stepiconselect\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'],\n    function($) {\n\n        var StepSave = function() {\n\n        };\n\n        StepSave.prototype.rebind_inputs = function() {\n            $('.step-rollovertext').unbind('change').change(this.saveStep.bind(this));\n            $('.chk-single-activity-link').unbind('change').change(this.saveStep.bind(this));\n            $('.step-single-activity-link').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_day').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_month').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_year').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_hour').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected_minute').unbind('change').change(this.saveStep.bind(this));\n            $('.completionexpected').unbind('change').change(this.saveStep.bind(this));\n            $('.step-icon').unbind('change').change(this.saveStep.bind(this));\n            $('.step-completion-modules').unbind('change').change(this.saveStep.bind(this));\n            StepSave.prototype.saveStep(this);\n        };\n\n        StepSave.prototype.saveStep = function(event) {\n            var stepContainer = $(event.target).closest('.step-container');\n            var expectedComplete = 0;\n            if(stepContainer.find('.completionexpected').prop(\"checked\") == true){\n                expectedComplete = 1;\n            }\n            var stepData = {\n                id: stepContainer.closest('.step-wrapper').data('stepid'),\n                rollovertext: stepContainer.find('.fitem input.step-rollovertext').val(),\n                stepicon: stepContainer.find('.fitem input.step-icon').val(),\n                completionmodules: stepContainer.find('.fitem input.step-completion-modules').val(),\n                linksingleactivity: stepContainer.find('.fitem input.chk-single-activity-link').val(),\n                pagelink: stepContainer.find('.fitem input.step-single-activity-link').val(),\n                expectedcomplete: expectedComplete,\n                completionexpected_day: stepContainer.find('.fitem select.completionexpected_day').val(),\n                completionexpected_month: stepContainer.find('.fitem select.completionexpected_month').val(),\n                completionexpected_year: stepContainer.find('.fitem select.completionexpected_year').val(),\n                completionexpected_hour: stepContainer.find('.fitem select.completionexpected_hour').val(),\n                completionexpected_minute: stepContainer.find('.fitem select.completionexpected_minute').val(),\n            };\n            delete stepData.days;\n            delete stepData.months;\n            delete stepData.years;\n            delete stepData.hours;\n            delete stepData.minutes;\n            stepContainer.children('input.step-configuration').val(JSON.stringify(stepData)).triggerHandler(\"change\");\n        };\n\n        return {\n\n            init: function() {\n                return new StepSave();\n            },\n\n            rebind_inputs: function() {\n                StepSave.prototype.rebind_inputs();\n            }\n        };\n    });"],"names":["define","$","StepSave","prototype","rebind_inputs","unbind","change","this","saveStep","bind","event","stepContainer","target","closest","expectedComplete","find","prop","stepData","id","data","rollovertext","val","stepicon","completionmodules","linksingleactivity","pagelink","expectedcomplete","completionexpected_day","completionexpected_month","completionexpected_year","completionexpected_hour","completionexpected_minute","days","months","years","hours","minutes","children","JSON","stringify","triggerHandler","init"],"mappings":";;;;;;AAqBAA,+BAAO,CAAC,WACJ,SAASC,OAEDC,SAAW,oBAIfA,SAASC,UAAUC,cAAgB,WAC/BH,EAAE,sBAAsBI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACnEN,EAAE,6BAA6BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OAC1EN,EAAE,8BAA8BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OAC3EN,EAAE,2BAA2BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACxEN,EAAE,6BAA6BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OAC1EN,EAAE,4BAA4BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACzEN,EAAE,4BAA4BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACzEN,EAAE,8BAA8BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OAC3EN,EAAE,uBAAuBI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACpEN,EAAE,cAAcI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OAC3DN,EAAE,4BAA4BI,OAAO,UAAUC,OAAOC,KAAKC,SAASC,KAAKF,OACzEL,SAASC,UAAUK,SAASD,OAGhCL,SAASC,UAAUK,SAAW,SAASE,WAC/BC,cAAgBV,EAAES,MAAME,QAAQC,QAAQ,mBACxCC,iBAAmB,EACyC,GAA7DH,cAAcI,KAAK,uBAAuBC,KAAK,aAC9CF,iBAAmB,OAEnBG,SAAW,CACXC,GAAIP,cAAcE,QAAQ,iBAAiBM,KAAK,UAChDC,aAAcT,cAAcI,KAAK,kCAAkCM,MACnEC,SAAUX,cAAcI,KAAK,0BAA0BM,MACvDE,kBAAmBZ,cAAcI,KAAK,wCAAwCM,MAC9EG,mBAAoBb,cAAcI,KAAK,yCAAyCM,MAChFI,SAAUd,cAAcI,KAAK,0CAA0CM,MACvEK,iBAAkBZ,iBAClBa,uBAAwBhB,cAAcI,KAAK,wCAAwCM,MACnFO,yBAA0BjB,cAAcI,KAAK,0CAA0CM,MACvFQ,wBAAyBlB,cAAcI,KAAK,yCAAyCM,MACrFS,wBAAyBnB,cAAcI,KAAK,yCAAyCM,MACrFU,0BAA2BpB,cAAcI,KAAK,2CAA2CM,cAEtFJ,SAASe,YACTf,SAASgB,cACThB,SAASiB,aACTjB,SAASkB,aACTlB,SAASmB,QAChBzB,cAAc0B,SAAS,4BAA4BhB,IAAIiB,KAAKC,UAAUtB,WAAWuB,eAAe,WAG7F,CAEHC,KAAM,kBACK,IAAIvC,UAGfE,cAAe,WACXF,SAASC,UAAUC"}