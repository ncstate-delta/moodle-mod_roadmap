{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap. Modernized version.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/notification',\n    'core/templates',\n    'mod_roadmap/expand_contract',\n    'mod_roadmap/learningobjectivesconfig',\n    'mod_roadmap/step_icon_select',\n    'mod_roadmap/step_activity_select',\n    'mod_roadmap/step_save',\n    'mod_roadmap/cycle_save',\n    'mod_roadmap/phase_save',\n    'mod_roadmap/repository',\n], (\n    $,\n    notification,\n    templates,\n    expandContract,\n    learningObjectives,\n    stepIconSelect,\n    stepActivitySelect,\n    stepSave,\n    cycleSave,\n    phaseSave,\n    roadmapRepo\n) => {\n\n    // Helper: Confirm dialog wrapper\n    const confirmDialog = (msg) => window.confirm(msg);\n\n    // Helper: Find the max ID for a given type\n    const getMaxValue = (dataType) => {\n        let ids = [];\n        $(`.${dataType}-wrapper`).each(function () {\n            const id = parseInt($(this).data(`${dataType}id`));\n            if (!isNaN(id)) {\n                ids.push(id);\n            }\n        });\n        return ids.length ? Math.max(...ids) : 0;\n    };\n\n    // Helper: Move wrapper up/down\n    const moveWrapper = ($wrapper, direction) => {\n        if (direction === 'up') {\n            const $prev = $wrapper.prev();\n            if ($prev.length) {\n                $wrapper.insertBefore($prev);\n            }\n        } else if (direction === 'down') {\n            const $next = $wrapper.next();\n            if ($next.length) {\n                $wrapper.insertAfter($next);\n            }\n        }\n    };\n\n    // Main class for roadmap config UI logic\n    class RoadmapConfig {\n        /**\n         * @param {String} inputSelector - Selector where config UI is injected.\n         * @param {String} inputConfig - Selector for hidden config input.\n         */\n        constructor(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n            this.initForm();\n        }\n\n        /**\n         * (Re)Initializes the roadmap configuration UI.\n         */\n        initForm() {\n            let inputConfigVal = this.configContainer.val();\n            if (!inputConfigVal) {\n                inputConfigVal = JSON.stringify({ phases: [] });\n                this.configContainer.val(inputConfigVal);\n            }\n            let config;\n            try {\n                config = JSON.parse(inputConfigVal);\n            } catch (e) {\n                notification.exception(e);\n                config = { phases: [] };\n            }\n\n            // Attach serialized config for template rendering\n            for (const phase of config.phases) {\n                phase.configuration = JSON.stringify(phase);\n                for (const cycle of (phase.cycles || [])) {\n                    cycle.configuration = JSON.stringify(cycle);\n                    for (const step of (cycle.steps || [])) {\n                        step.configuration = JSON.stringify(step);\n                    }\n                }\n            }\n\n            // Render UI\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then((html, js) => {\n                    templates.prependNodeContents(this.inputSelector, html, js);\n\n                    // Bind all event handlers\n                    this.bindExpandCollapseControls();\n\n                    // Delegated event binding for dynamic elements\n                    $('#roadmapconfiguration')\n                        .off('click', 'a[data-action]')\n                        .on('click', 'a[data-action]', (e) => this.clickHandler(e));\n\n                    this.phaseColorChange($('select[name=\"phasecolorpattern\"]')); // Initial display\n\n                    learningObjectives.refreshChecklists();\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                })\n                .fail(notification.exception);\n\n            // Color pattern changes (live preview)\n            $('select[name=\"phasecolorpattern\"]').off('change').on('change', (e) => {\n                this.phaseColorChange($(e.target));\n            });\n        }\n\n        /**\n         * Handles all roadmap action links via event delegation.\n         * @param {Event} event The event object.\n         */\n        clickHandler(event) {\n            const $node = $(event.currentTarget);\n            const action = $node.data('action');\n            // All possible actions:\n            switch (action) {\n                case 'collapse_all_phases': return this.collapsePhases();\n                case 'expand_all_phases': return this.expandPhases();\n                case 'collapse_all_cycles':\n                    // FIX: robustly find the phase-cycles-container for this phase\n                    return this.collapseCycles($node.closest('.phase-wrapper').find('.phase-cycles-container').first());\n                case 'expand_all_cycles':\n                    // FIX: robustly find the phase-cycles-container for this phase\n                    return this.expandCycles($node.closest('.phase-wrapper')\n                        .find('.phase-cycles-container').first());\n                case 'collapse_all_steps': return this.collapseSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'expand_all_steps': return this.expandSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'phase_collapse_control': return this.collapsePhase($node);\n                case 'cycle_collapse_control': return this.collapseCycle($node);\n                case 'step_collapse_control': return this.collapseStep($node);\n                case 'phase_delete_control': return this.deletePhase($node);\n                case 'cycle_delete_control': return this.deleteCycle($node);\n                case 'step_delete_control': return this.deleteStep($node);\n                case 'add_phase': return this.addPhase();\n                case 'phase_up_control': return this.upPhase($node);\n                case 'phase_down_control': return this.downPhase($node);\n                case 'add_phase_cycle': return this.addCycle($node);\n                case 'cycle_up_control': return this.upCycle($node);\n                case 'cycle_down_control': return this.downCycle($node);\n                case 'add_cycle_step': return this.addStep($node);\n                case 'step_up_control': return this.upStep($node);\n                case 'step_down_control': return this.downStep($node);\n            }\n        }\n\n        /**\n         * Show phase color pattern preview and update UI.\n         * @param {Object} $node The jQuery node for the color selector.\n         */\n        async phaseColorChange($node) {\n            const colorId = $node.val();\n            this.getColorSet(colorId);\n        }\n\n        /**\n         * Fetch and display a color pattern for phase UI.\n         * @param {string|number} colorId The color pattern identifier.\n         */\n        async getColorSet(colorId) {\n            $('.phase-color-display').remove();\n            let colors = [];\n            try {\n                colors = await roadmapRepo.fetchColorPattern(colorId);\n            } catch (e) {\n                notification.exception(e);\n            }\n            const $colorTable = $('<div>').addClass('phase-color-display');\n            for (const color of colors) {\n                $colorTable.append(`<div class=\"color\" style=\"background-color:${color}\"></div>`);\n            }\n            $('select[name=\"phasecolorpattern\"]').parent().append($colorTable);\n\n            // Color border for each phase\n            $('#roadmapconfiguration #phase-container > .phase-wrapper > div.row').each(function (i) {\n                const numColors = colors.length;\n                const idxColor = i % numColors;\n                $(this).css('border-bottom', `solid 1px ${colors[idxColor]}`);\n            });\n        }\n\n        /**\n         * Binds config save to all phase configuration changes.\n         */\n        bindConfigSave() {\n            $('input.phase-configuration').off('change').on('change', () => this.configSave());\n        }\n\n        /**\n         * Serializes the whole roadmap config and saves to hidden input.\n         */\n        configSave() {\n            const $phaseContainer = $('#phase-container');\n            const roadmapData = [];\n            let index = 0;\n            $phaseContainer.find('.phase-wrapper .phase-configuration').each(function () {\n                let phaseData = $(this).val() || '{}';\n                let phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index++;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({\n                phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val(),\n            }));\n        }\n\n        /**\n         * Add a new phase.\n         */\n        addPhase() {\n            const config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            const nextIndex = config.phases.length;\n            const maxPhaseId = getMaxValue('phase');\n            const newPhase = { id: maxPhaseId + 1, index: nextIndex, number: nextIndex + 1 };\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n\n            templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then((html, js) => {\n                    templates.appendNodeContents('#phase-container', html, js);\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n                }).fail(notification.exception);\n        }\n\n        /**\n         * Add a new cycle to a phase.\n         * @param {Object} $node The jQuery node that triggered the add cycle action.\n         */\n        addCycle($node) {\n            const $phaseContainer = $node.closest('.phase-container');\n            const $cycleContainer = $phaseContainer.children('.phase-cycles-container');\n            const nextCycleIndex = $cycleContainer.children('.cycle-wrapper').length;\n            const maxCycleId = getMaxValue('cycle');\n            const newCycle = { id: maxCycleId + 1, index: nextCycleIndex, number: nextCycleIndex + 1 };\n\n            templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then((html, js) => {\n                    templates.appendNodeContents($cycleContainer, html, js);\n                    learningObjectives.refreshChecklists();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                }).fail(notification.exception);\n        }\n\n        /**\n         * Add a new step to a cycle.\n         * @param {Object} $node The jQuery node that triggered the add step action.\n         */\n        addStep($node) {\n            const $cycleContainer = $node.closest('.cycle-container');\n            const $stepsContainer = $cycleContainer.children('.cycle-steps-container');\n            const nextStepIndex = $stepsContainer.children('.step-wrapper').length;\n            const maxStepId = getMaxValue('step');\n            const iconUrl = $('input[name=\"icon_url\"]').val();\n\n            const newStep = {\n                id: maxStepId + 1,\n                index: nextStepIndex,\n                number: nextStepIndex + 1,\n                stepicon: 'icon-10',\n                iconurl: `${iconUrl}?name=icon-10&percent=100&flags=n`,\n            };\n\n            templates.render('mod_roadmap/configuration_step', newStep)\n                .then((html, js) => {\n                    templates.appendNodeContents($stepsContainer, html, js);\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                }).fail(notification.exception);\n        }\n\n        // ---- Expand/Collapse controls ----\n\n        bindExpandCollapseControls() {\n            $('.expand-collapse-controls .collapse_everything').off('click').on('click', (e) => {\n                e.preventDefault();\n                this.collapseEverything();\n            });\n            $('.expand-collapse-controls .expand_everything').off('click').on('click', (e) => {\n                e.preventDefault();\n                this.expandEverything();\n            });\n        }\n\n        expandPhases() {\n            this.expandChildrenClass($('#roadmapconfiguration'), 'phase');\n        }\n        expandCycles(node) {\n            this.expandChildrenClass(node, 'cycle');\n        }\n        expandSteps(node) {\n            this.expandChildrenClass(node, 'step');\n        }\n        collapsePhases() {\n            const node = $('#roadmapconfiguration');\n            this.collapseCycles(node);\n            this.collapseChildrenClass(node, 'phase');\n        }\n        collapseCycles(node) {\n            this.collapseSteps(node);\n            this.collapseChildrenClass(node, 'cycle');\n        }\n        collapseSteps(node) {\n            this.collapseChildrenClass(node, 'step');\n        }\n        expandChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function () {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('hide')) {\n                    $(this).click();\n                }\n            });\n        }\n        collapseChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function () {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('visible')) {\n                    $(this).click();\n                }\n            });\n        }\n\n        /**\n         * Collapse a single phase.\n         * @param {Object} $node The jQuery node for the control.\n         */\n        collapsePhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            const $container = $wrapper.children('.phase-container');\n            expandContract.expandCollapse($container, $node);\n        }\n\n        /**\n         * Collapse a single cycle.\n         * @param {Object} $node The jQuery node for the control.\n         */\n        collapseCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $container = $wrapper.children('.cycle-container');\n            expandContract.expandCollapse($container, $node);\n        }\n\n        /**\n         * Collapse a single step.\n         * @param {Object} $node The jQuery node for the control.\n         */\n        collapseStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $container = $wrapper.children('.step-container');\n            expandContract.expandCollapse($container, $node);\n        }\n\n        // ---- Deletion ----\n\n        /**\n         * Delete a phase.\n         * @param {Object} $node The jQuery node for the delete control.\n         */\n        deletePhase($node) {\n            if (confirmDialog('Are you sure you want to delete this Phase?')) {\n                const $wrapper = $node.closest('.phase-wrapper');\n                const phaseId = $wrapper.data('phaseid');\n                $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                $wrapper.remove();\n                this.configSave();\n            }\n        }\n\n        /**\n         * Delete a cycle.\n         * @param {Object} $node The jQuery node for the delete control.\n         */\n        deleteCycle($node) {\n            if (confirmDialog('Are you sure you want to delete this Cycle?')) {\n                const $wrapper = $node.closest('.cycle-wrapper');\n                const $phaseContainer = $node.closest('.phase-container');\n                const cycleId = $wrapper.data('cycleid');\n                $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                $wrapper.remove();\n                $phaseContainer.find('.phase-title').triggerHandler('change');\n            }\n        }\n\n        /**\n         * Delete a step.\n         * @param {Object} $node The jQuery node for the delete control.\n         */\n        deleteStep($node) {\n            if (confirmDialog('Are you sure you want to delete this Step?')) {\n                const $wrapper = $node.closest('.step-wrapper');\n                const $cycleContainer = $node.closest('.cycle-container');\n                const stepId = $wrapper.data('stepid');\n                $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                $wrapper.remove();\n                $cycleContainer.find('.cycle-title').triggerHandler('change');\n            }\n        }\n\n        // ---- Move up/down ----\n\n        upPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'up');\n            this.configSave();\n        }\n        downPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'down');\n            this.configSave();\n        }\n        upCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'up');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        downCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'down');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        upStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'up');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n        downStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'down');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n\n        // ---- Expand/collapse everything ----\n        expandEverything() {\n            this.expandPhases();\n        }\n        collapseEverything() {\n            this.collapsePhases();\n        }\n    }\n\n    return {\n        /**\n         * Main initialisation.\n         * @param {String} inputSelector The hidden input field selector.\n         * @param {String} inputConfig The hidden input configuration.\n         * @return {Object} RoadmapConfig instance\n         */\n        init: function (inputSelector, inputConfig) {\n            return new RoadmapConfig(inputSelector, inputConfig);\n        }\n    };\n});"],"names":["define","$","notification","templates","expandContract","learningObjectives","stepIconSelect","stepActivitySelect","stepSave","cycleSave","phaseSave","roadmapRepo","confirmDialog","msg","window","confirm","getMaxValue","dataType","ids","each","id","parseInt","this","data","isNaN","push","length","Math","max","moveWrapper","$wrapper","direction","$prev","prev","insertBefore","$next","next","insertAfter","RoadmapConfig","constructor","inputSelector","inputConfig","configContainer","initForm","config","inputConfigVal","val","JSON","stringify","phases","parse","e","exception","phase","configuration","cycle","cycles","step","steps","render","then","html","js","prependNodeContents","bindExpandCollapseControls","off","on","clickHandler","phaseColorChange","refreshChecklists","rebindButtons","rebindInputs","bindConfigSave","require","fail","target","event","$node","currentTarget","collapsePhases","expandPhases","collapseCycles","closest","find","first","expandCycles","collapseSteps","parent","expandSteps","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","addPhase","upPhase","downPhase","addCycle","upCycle","downCycle","addStep","upStep","downStep","colorId","getColorSet","remove","colors","fetchColorPattern","$colorTable","addClass","color","append","i","idxColor","css","configSave","$phaseContainer","roadmapData","index","phaseData","phaseDataObj","phaseDeletes","cycleDeletes","stepDeletes","nextIndex","newPhase","number","appendNodeContents","$cycleContainer","children","nextCycleIndex","newCycle","$stepsContainer","nextStepIndex","maxStepId","iconUrl","newStep","stepicon","iconurl","preventDefault","collapseEverything","expandEverything","expandChildrenClass","node","collapseChildrenClass","$parent","className","hasClass","click","$container","expandCollapse","phaseId","cycleId","triggerHandler","stepId","init"],"mappings":"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"}