{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/notification',\n    'core/templates',\n    'mod_roadmap/expand_contract',\n    'mod_roadmap/learningobjectivesconfig',\n    'mod_roadmap/step_icon_select',\n    'mod_roadmap/step_activity_select',\n    'mod_roadmap/step_save',\n    'mod_roadmap/cycle_save',\n    'mod_roadmap/phase_save',\n    'mod_roadmap/repository',\n    'core/modal_delete_cancel',\n    'core/modal_events'\n], (\n    $,\n    notification,\n    templates,\n    expandContract,\n    learningObjectives,\n    stepIconSelect,\n    stepActivitySelect,\n    stepSave,\n    cycleSave,\n    phaseSave,\n    roadmapRepo,\n    ModalDeleteCancel,\n    ModalEvents\n) => {\n\n    const showDeleteConfirmModal = (message, title = 'Confirm delete') => {\n        return ModalDeleteCancel.create({\n            title,\n            body: message\n        }).then(modal => {\n            return new Promise(resolve => {\n                modal.show();\n                modal.getRoot().on(ModalEvents.delete, () => {\n                    resolve(true);\n                    modal.hide();\n                });\n                modal.getRoot().on(ModalEvents.cancel, () => {\n                    resolve(false);\n                    modal.hide();\n                });\n                modal.getRoot().on(ModalEvents.hidden, () => {\n                    modal.destroy();\n                });\n            });\n        });\n    };\n\n    const getMaxValue = dataType => {\n        const ids = [];\n        $(`.${dataType}-wrapper`).each(function() {\n            const id = parseInt($(this).data(`${dataType}id`), 10);\n            if (!isNaN(id)) {\n                ids.push(id);\n            }\n        });\n        return ids.length ? Math.max(...ids) : 0;\n    };\n\n    const moveWrapper = ($wrapper, direction) => {\n        if (direction === 'up') {\n            const $prev = $wrapper.prev();\n            if ($prev.length) {\n                $wrapper.insertBefore($prev);\n            }\n        } else if (direction === 'down') {\n            const $next = $wrapper.next();\n            if ($next.length) {\n                $wrapper.insertAfter($next);\n            }\n        }\n    };\n\n    let colorPatternCache = {};\n\n    class RoadmapConfig {\n        constructor(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n            this.initForm();\n        }\n\n        initForm() {\n            let inputConfigVal = this.configContainer.val();\n            if (!inputConfigVal) {\n                inputConfigVal = JSON.stringify({phases: []});\n                this.configContainer.val(inputConfigVal);\n            }\n            let config;\n            try {\n                config = JSON.parse(inputConfigVal);\n            } catch (e) {\n                notification.exception(e);\n                config = {phases: []};\n            }\n\n            config.phases.forEach(phase => {\n                phase.configuration = JSON.stringify(phase);\n                (phase.cycles || []).forEach(cycle => {\n                    cycle.configuration = JSON.stringify(cycle);\n                    (cycle.steps || []).forEach(step => {\n                        step.configuration = JSON.stringify(step);\n                    });\n                });\n            });\n\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then((html, js) => {\n                    templates.prependNodeContents(this.inputSelector, html, js);\n\n                    this.bindExpandCollapseControls();\n\n                    $('#roadmapconfiguration')\n                        .off('click', 'a[data-action]')\n                        .on('click', 'a[data-action]', e => this.clickHandler(e));\n\n                    this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n\n                    learningObjectives.refreshChecklists();\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                })\n                .catch(notification.exception);\n\n            $('select[name=\"phasecolorpattern\"]').off('change').on('change', e => {\n                this.phaseColorChange($(e.target));\n            });\n        }\n\n        clickHandler(event) {\n            const $node = $(event.currentTarget);\n            const action = $node.data('action');\n            switch (action) {\n                case 'collapse_all_phases': return this.collapsePhases();\n                case 'expand_all_phases': return this.expandPhases();\n                case 'collapse_all_cycles': return this.collapseCycles($node.closest('.phase-wrapper')\n                    .find('.phase-cycles-container').first());\n                case 'expand_all_cycles': return this.expandCycles($node.closest('.phase-wrapper')\n                    .find('.phase-cycles-container').first());\n                case 'collapse_all_steps': return this.collapseSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'expand_all_steps': return this.expandSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'phase_collapse_control': return this.collapsePhase($node);\n                case 'cycle_collapse_control': return this.collapseCycle($node);\n                case 'step_collapse_control': return this.collapseStep($node);\n                case 'phase_delete_control': return this.deletePhase($node);\n                case 'cycle_delete_control': return this.deleteCycle($node);\n                case 'step_delete_control': return this.deleteStep($node);\n                case 'add_phase': return this.addPhase();\n                case 'phase_up_control': return this.upPhase($node);\n                case 'phase_down_control': return this.downPhase($node);\n                case 'add_phase_cycle': return this.addCycle($node);\n                case 'cycle_up_control': return this.upCycle($node);\n                case 'cycle_down_control': return this.downCycle($node);\n                case 'add_cycle_step': return this.addStep($node);\n                case 'step_up_control': return this.upStep($node);\n                case 'step_down_control': return this.downStep($node);\n                default: return undefined;\n            }\n        }\n\n        phaseColorChange($node) {\n            const colorId = $node.val();\n            if (colorPatternCache[colorId]) {\n                this.applyColorSet(colorPatternCache[colorId]);\n                return;\n            }\n            return roadmapRepo.fetchColorPattern(colorId)\n                .then(colors => {\n                    colorPatternCache[colorId] = colors;\n                    this.applyColorSet(colors);\n                    return colors;\n                })\n                .catch(notification.exception);\n        }\n\n        applyColorSet(colors) {\n            $('.phase-color-display').remove();\n            const $colorTable = $('<div>').addClass('phase-color-display');\n            colors.forEach(color => {\n                $colorTable.append(`<div class=\"color\" style=\"background-color:${color}\"></div>`);\n            });\n            $('select[name=\"phasecolorpattern\"]').parent().append($colorTable);\n\n            $('#roadmapconfiguration #phase-container > .phase-wrapper > div.row').each(function(i) {\n                const numColors = colors.length;\n                const idxColor = i % numColors;\n                $(this).css('border-bottom', `solid 1px ${colors[idxColor]}`);\n            });\n        }\n\n        bindConfigSave() {\n            $('input.phase-configuration').off('change').on('change', () => this.configSave());\n        }\n\n        configSave() {\n            const $phaseContainer = $('#phase-container');\n            const roadmapData = [];\n            let index = 0;\n            $phaseContainer.find('.phase-wrapper .phase-configuration').each(function() {\n                const phaseData = $(this).val() || '{}';\n                const phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index++;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({\n                phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val()\n            }));\n        }\n\n        addPhase() {\n            const config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            const nextIndex = config.phases.length;\n            const maxPhaseId = getMaxValue('phase');\n            const newPhase = {\n                id: maxPhaseId + 1,\n                index: nextIndex,\n                number: nextIndex + 1,\n                title: `Phase ${nextIndex + 1}`,\n                subtitle: `Subtitle ${nextIndex + 1}`\n            };\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n            return templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then((html, js) => {\n                    templates.appendNodeContents('#phase-container', html, js);\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n                    this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n                })\n                .catch(notification.exception);\n        }\n\n        addCycle($node) {\n            const $phaseContainer = $node.closest('.phase-container');\n            const $cycleContainer = $phaseContainer.children('.phase-cycles-container');\n            const nextCycleIndex = $cycleContainer.children('.cycle-wrapper').length;\n            const maxCycleId = getMaxValue('cycle');\n            const newCycle = {\n                id: maxCycleId + 1,\n                index: nextCycleIndex,\n                number: nextCycleIndex + 1,\n                title: `Cycle ${nextCycleIndex + 1}`,\n                subtitle: `Subtitle ${nextCycleIndex + 1}`\n            };\n            return templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then((html, js) => {\n                    templates.appendNodeContents($cycleContainer, html, js);\n                    learningObjectives.refreshChecklists();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                })\n                .catch(notification.exception);\n        }\n\n        addStep($node) {\n            const $cycleContainer = $node.closest('.cycle-container');\n            const $stepsContainer = $cycleContainer.children('.cycle-steps-container');\n            const nextStepIndex = $stepsContainer.children('.step-wrapper').length;\n            const maxStepId = getMaxValue('step');\n            const iconUrl = $('input[name=\"icon_url\"]').val();\n\n            const newStep = {\n                id: maxStepId + 1,\n                index: nextStepIndex,\n                number: nextStepIndex + 1,\n                stepicon: 'icon-10',\n                iconurl: `${iconUrl}?name=icon-10&percent=100&flags=n`\n            };\n            return templates.render('mod_roadmap/configuration_step', newStep)\n                .then((html, js) => {\n                    templates.appendNodeContents($stepsContainer, html, js);\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                })\n                .catch(notification.exception);\n        }\n\n        bindExpandCollapseControls() {\n            $('.expand-collapse-controls .collapse_everything').off('click').on('click', e => {\n                e.preventDefault();\n                this.collapseEverything();\n            });\n            $('.expand-collapse-controls .expand_everything').off('click').on('click', e => {\n                e.preventDefault();\n                this.expandEverything();\n            });\n        }\n\n        expandPhases() { this.expandChildrenClass($('#roadmapconfiguration'), 'phase'); }\n        expandCycles(node) { this.expandChildrenClass(node, 'cycle'); }\n        expandSteps(node) { this.expandChildrenClass(node, 'step'); }\n        collapsePhases() {\n            const node = $('#roadmapconfiguration');\n            this.collapseCycles(node);\n            this.collapseChildrenClass(node, 'phase');\n        }\n        collapseCycles(node) {\n            this.collapseSteps(node);\n            this.collapseChildrenClass(node, 'cycle');\n        }\n        collapseSteps(node) { this.collapseChildrenClass(node, 'step'); }\n        expandChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function() {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('hide')) {\n                    $(this).click();\n                }\n            });\n        }\n        collapseChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function() {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('visible')) {\n                    $(this).click();\n                }\n            });\n        }\n\n        collapsePhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            const $container = $wrapper.children('.phase-container');\n            expandContract.expandCollapse($container, $node);\n        }\n        collapseCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $container = $wrapper.children('.cycle-container');\n            expandContract.expandCollapse($container, $node);\n        }\n        collapseStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $container = $wrapper.children('.step-container');\n            expandContract.expandCollapse($container, $node);\n        }\n\n        deletePhase($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Phase?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.phase-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const phaseId = $wrapper.data('phaseid');\n                        $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                        $wrapper.remove();\n                        this.configSave();\n                        this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n                    }\n                });\n        }\n\n        deleteCycle($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Cycle?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.cycle-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const $phaseContainer = $node.closest('.phase-container');\n                        const cycleId = $wrapper.data('cycleid');\n                        $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                        $wrapper.remove();\n                        $phaseContainer.find('.phase-title').triggerHandler('change');\n                    }\n                });\n        }\n\n        deleteStep($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Step?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.step-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const $cycleContainer = $node.closest('.cycle-container');\n                        const stepId = $wrapper.data('stepid');\n                        $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                        $wrapper.remove();\n                        $cycleContainer.find('.cycle-title').triggerHandler('change');\n                    }\n                });\n        }\n\n        upPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'up');\n            this.configSave();\n            this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n        }\n        downPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'down');\n            this.configSave();\n            this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n        }\n        upCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'up');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        downCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'down');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        upStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'up');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n        downStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'down');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n\n        expandEverything() { this.expandPhases(); }\n        collapseEverything() { this.collapsePhases(); }\n    }\n\n    return {\n        init: (inputSelector, inputConfig) => new RoadmapConfig(inputSelector, inputConfig)\n    };\n});"],"names":["define","$","notification","templates","expandContract","learningObjectives","stepIconSelect","stepActivitySelect","stepSave","cycleSave","phaseSave","roadmapRepo","ModalDeleteCancel","ModalEvents","showDeleteConfirmModal","message","title","create","body","then","modal","Promise","resolve","show","getRoot","on","delete","hide","cancel","hidden","destroy","getMaxValue","dataType","ids","each","id","parseInt","this","data","isNaN","push","length","Math","max","moveWrapper","$wrapper","direction","$prev","prev","insertBefore","$next","next","insertAfter","colorPatternCache","RoadmapConfig","constructor","inputSelector","inputConfig","configContainer","initForm","config","inputConfigVal","val","JSON","stringify","phases","parse","e","exception","forEach","phase","configuration","cycles","cycle","steps","step","render","html","js","prependNodeContents","bindExpandCollapseControls","off","clickHandler","phaseColorChange","refreshChecklists","rebindButtons","rebindInputs","bindConfigSave","require","catch","target","event","$node","currentTarget","collapsePhases","expandPhases","collapseCycles","closest","find","first","expandCycles","collapseSteps","parent","expandSteps","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","addPhase","upPhase","downPhase","addCycle","upCycle","downCycle","addStep","upStep","downStep","colorId","fetchColorPattern","colors","applyColorSet","remove","$colorTable","addClass","color","append","i","idxColor","css","configSave","$phaseContainer","roadmapData","index","phaseData","phaseDataObj","phaseDeletes","cycleDeletes","stepDeletes","nextIndex","newPhase","number","subtitle","appendNodeContents","$cycleContainer","children","nextCycleIndex","newCycle","$stepsContainer","nextStepIndex","maxStepId","iconUrl","newStep","stepicon","iconurl","preventDefault","collapseEverything","expandEverything","expandChildrenClass","node","collapseChildrenClass","$parent","className","hasClass","click","$container","expandCollapse","confirmed","phaseId","cycleId","triggerHandler","stepId","init"],"mappings":";;;;;;;AAsBAA,oCAAO,CACH,SACA,oBACA,iBACA,8BACA,uCACA,+BACA,mCACA,wBACA,yBACA,yBACA,yBACA,2BACA,sBACD,CACCC,EACAC,aACAC,UACAC,eACAC,mBACAC,eACAC,mBACAC,SACAC,UACAC,UACAC,YACAC,kBACAC,qBAGMC,uBAAyB,SAACC,aAASC,6DAAQ,wBACtCJ,kBAAkBK,OAAO,CAC5BD,MAAAA,MACAE,KAAMH,UACPI,MAAKC,OACG,IAAIC,SAAQC,UACfF,MAAMG,OACNH,MAAMI,UAAUC,GAAGZ,YAAYa,QAAQ,KACnCJ,SAAQ,GACRF,MAAMO,UAEVP,MAAMI,UAAUC,GAAGZ,YAAYe,QAAQ,KACnCN,SAAQ,GACRF,MAAMO,UAEVP,MAAMI,UAAUC,GAAGZ,YAAYgB,QAAQ,KACnCT,MAAMU,mBAMhBC,YAAcC,iBACVC,IAAM,UACZhC,aAAM+B,sBAAoBE,MAAK,iBACrBC,GAAKC,SAASnC,EAAEoC,MAAMC,eAAQN,gBAAe,IAC9CO,MAAMJ,KACPF,IAAIO,KAAKL,OAGVF,IAAIQ,OAASC,KAAKC,OAAOV,KAAO,GAGrCW,YAAc,CAACC,SAAUC,gBACT,OAAdA,UAAoB,OACdC,MAAQF,SAASG,OACnBD,MAAMN,QACNI,SAASI,aAAaF,YAEvB,GAAkB,SAAdD,UAAsB,OACvBI,MAAQL,SAASM,OACnBD,MAAMT,QACNI,SAASO,YAAYF,aAK7BG,kBAAoB,SAElBC,cACFC,YAAYC,cAAeC,kBAClBD,cAAgBA,mBAChBE,gBAAkBzD,EAAEwD,kBACpBE,WAGTA,eAMQC,OALAC,eAAiBxB,KAAKqB,gBAAgBI,MACrCD,iBACDA,eAAiBE,KAAKC,UAAU,CAACC,OAAQ,UACpCP,gBAAgBI,IAAID,qBAIzBD,OAASG,KAAKG,MAAML,gBACtB,MAAOM,GACLjE,aAAakE,UAAUD,GACvBP,OAAS,CAACK,OAAQ,IAGtBL,OAAOK,OAAOI,SAAQC,QAClBA,MAAMC,cAAgBR,KAAKC,UAAUM,QACpCA,MAAME,QAAU,IAAIH,SAAQI,QACzBA,MAAMF,cAAgBR,KAAKC,UAAUS,QACpCA,MAAMC,OAAS,IAAIL,SAAQM,OACxBA,KAAKJ,cAAgBR,KAAKC,UAAUW,eAKhDxE,UAAUyE,OAAO,mCAAoChB,QAChDzC,MAAK,CAAC0D,KAAMC,MACT3E,UAAU4E,oBAAoB1C,KAAKmB,cAAeqB,KAAMC,SAEnDE,6BAEL/E,EAAE,yBACGgF,IAAI,QAAS,kBACbxD,GAAG,QAAS,kBAAkB0C,GAAK9B,KAAK6C,aAAaf,UAErDgB,iBAAiBlF,EAAE,qCAExBI,mBAAmB+E,oBACnB9E,eAAe+E,gBACf9E,mBAAmB8E,gBACnB7E,SAAS8E,eACT7E,UAAU6E,eACV5E,UAAU4E,oBACLC,iBAELC,QAAQ,CAAC,0BAEZC,MAAMvF,aAAakE,WAExBnE,EAAE,oCAAoCgF,IAAI,UAAUxD,GAAG,UAAU0C,SACxDgB,iBAAiBlF,EAAEkE,EAAEuB,YAIlCR,aAAaS,aACHC,MAAQ3F,EAAE0F,MAAME,sBACPD,MAAMtD,KAAK,eAEjB,6BAA8BD,KAAKyD,qBACnC,2BAA4BzD,KAAK0D,mBACjC,6BAA8B1D,KAAK2D,eAAeJ,MAAMK,QAAQ,kBAChEC,KAAK,2BAA2BC,aAChC,2BAA4B9D,KAAK+D,aAAaR,MAAMK,QAAQ,kBAC5DC,KAAK,2BAA2BC,aAChC,4BAA6B9D,KAAKgE,cAAcT,MAAMU,OAAO,4BAC7DnD,KAAK,+BACL,0BAA2Bd,KAAKkE,YAAYX,MAAMU,OAAO,4BACzDnD,KAAK,+BACL,gCAAiCd,KAAKmE,cAAcZ,WACpD,gCAAiCvD,KAAKoE,cAAcb,WACpD,+BAAgCvD,KAAKqE,aAAad,WAClD,8BAA+BvD,KAAKsE,YAAYf,WAChD,8BAA+BvD,KAAKuE,YAAYhB,WAChD,6BAA8BvD,KAAKwE,WAAWjB,WAC9C,mBAAoBvD,KAAKyE,eACzB,0BAA2BzE,KAAK0E,QAAQnB,WACxC,4BAA6BvD,KAAK2E,UAAUpB,WAC5C,yBAA0BvD,KAAK4E,SAASrB,WACxC,0BAA2BvD,KAAK6E,QAAQtB,WACxC,4BAA6BvD,KAAK8E,UAAUvB,WAC5C,wBAAyBvD,KAAK+E,QAAQxB,WACtC,yBAA0BvD,KAAKgF,OAAOzB,WACtC,2BAA4BvD,KAAKiF,SAAS1B,uBAKvDT,iBAAiBS,aACP2B,QAAU3B,MAAM9B,UAClBT,kBAAkBkE,gBAIf5G,YAAY6G,kBAAkBD,SAChCpG,MAAKsG,SACFpE,kBAAkBkE,SAAWE,YACxBC,cAAcD,QACZA,UAEVhC,MAAMvF,aAAakE,gBATfsD,cAAcrE,kBAAkBkE,UAY7CG,cAAcD,QACVxH,EAAE,wBAAwB0H,eACpBC,YAAc3H,EAAE,SAAS4H,SAAS,uBACxCJ,OAAOpD,SAAQyD,QACXF,YAAYG,4DAAqDD,sBAErE7H,EAAE,oCAAoCqG,SAASyB,OAAOH,aAEtD3H,EAAE,qEAAqEiC,MAAK,SAAS8F,SAE3EC,SAAWD,EADCP,OAAOhF,OAEzBxC,EAAEoC,MAAM6F,IAAI,oCAA8BT,OAAOQ,eAIzD1C,iBACItF,EAAE,6BAA6BgF,IAAI,UAAUxD,GAAG,UAAU,IAAMY,KAAK8F,eAGzEA,mBACUC,gBAAkBnI,EAAE,oBACpBoI,YAAc,OAChBC,MAAQ,EACZF,gBAAgBlC,KAAK,uCAAuChE,MAAK,iBACvDqG,UAAYtI,EAAEoC,MAAMyB,OAAS,KAC7B0E,aAAezE,KAAKG,MAAMqE,WAChCC,aAAaF,MAAQA,QACrBD,YAAY7F,KAAKgG,iBAErBvI,EAAE,sCAAsC6D,IAAIC,KAAKC,UAAU,CACvDC,OAAQoE,YACRI,aAAcxI,EAAE,kBAAkB6D,MAClC4E,aAAczI,EAAE,kBAAkB6D,MAClC6E,YAAa1I,EAAE,iBAAiB6D,SAIxCgD,iBACUlD,OAASG,KAAKG,MAAMjE,EAAE,sCAAsC6D,OAC5D8E,UAAYhF,OAAOK,OAAOxB,OAE1BoG,SAAW,CACb1G,GAFeJ,YAAY,SAEV,EACjBuG,MAAOM,UACPE,OAAQF,UAAY,EACpB5H,sBAAgB4H,UAAY,GAC5BG,4BAAsBH,UAAY,WAEtChF,OAAOK,OAAOzB,KAAKqG,UACnB5I,EAAE,sCAAsC6D,IAAIC,KAAKC,UAAUJ,SACpDzD,UAAUyE,OAAO,kCAAmCiE,UACtD1H,MAAK,CAAC0D,KAAMC,MACT3E,UAAU6I,mBAAmB,mBAAoBnE,KAAMC,IACvDpE,UAAU4E,oBACLC,sBACAJ,iBAAiBlF,EAAE,wCAE3BwF,MAAMvF,aAAakE,WAG5B6C,SAASrB,aAECqD,gBADkBrD,MAAMK,QAAQ,oBACEiD,SAAS,2BAC3CC,eAAiBF,gBAAgBC,SAAS,kBAAkBzG,OAE5D2G,SAAW,CACbjH,GAFeJ,YAAY,SAEV,EACjBuG,MAAOa,eACPL,OAAQK,eAAiB,EACzBnI,sBAAgBmI,eAAiB,GACjCJ,4BAAsBI,eAAiB,WAEpChJ,UAAUyE,OAAO,kCAAmCwE,UACtDjI,MAAK,CAAC0D,KAAMC,MACT3E,UAAU6I,mBAAmBC,gBAAiBpE,KAAMC,IACpDzE,mBAAmB+E,oBACnB3E,UAAU6E,eACV5E,UAAU4E,kBAEbG,MAAMvF,aAAakE,WAG5BgD,QAAQxB,aAEEyD,gBADkBzD,MAAMK,QAAQ,oBACEiD,SAAS,0BAC3CI,cAAgBD,gBAAgBH,SAAS,iBAAiBzG,OAC1D8G,UAAYxH,YAAY,QACxByH,QAAUvJ,EAAE,0BAA0B6D,MAEtC2F,QAAU,CACZtH,GAAIoH,UAAY,EAChBjB,MAAOgB,cACPR,OAAQQ,cAAgB,EACxBI,SAAU,UACVC,kBAAYH,qDAETrJ,UAAUyE,OAAO,iCAAkC6E,SACrDtI,MAAK,CAAC0D,KAAMC,MACT3E,UAAU6I,mBAAmBK,gBAAiBxE,KAAMC,IACpDxE,eAAe+E,gBACf9E,mBAAmB8E,gBACnB7E,SAAS8E,eACT7E,UAAU6E,kBAEbG,MAAMvF,aAAakE,WAG5BY,6BACI/E,EAAE,kDAAkDgF,IAAI,SAASxD,GAAG,SAAS0C,IACzEA,EAAEyF,sBACGC,wBAET5J,EAAE,gDAAgDgF,IAAI,SAASxD,GAAG,SAAS0C,IACvEA,EAAEyF,sBACGE,sBAIb/D,oBAAsBgE,oBAAoB9J,EAAE,yBAA0B,SACtEmG,aAAa4D,WAAaD,oBAAoBC,KAAM,SACpDzD,YAAYyD,WAAaD,oBAAoBC,KAAM,QACnDlE,uBACUkE,KAAO/J,EAAE,8BACV+F,eAAegE,WACfC,sBAAsBD,KAAM,SAErChE,eAAegE,WACN3D,cAAc2D,WACdC,sBAAsBD,KAAM,SAErC3D,cAAc2D,WAAaC,sBAAsBD,KAAM,QACvDD,oBAAoBG,QAASC,WACzBD,QAAQhE,8BAAuBiE,kCAAgCjI,MAAK,WAC/CjC,EAAEoC,MAAM4D,mBAAYkE,uBACTjB,oBAAaiB,yBAC1BC,SAAS,SACpBnK,EAAEoC,MAAMgI,WAIpBJ,sBAAsBC,QAASC,WAC3BD,QAAQhE,8BAAuBiE,kCAAgCjI,MAAK,WAC/CjC,EAAEoC,MAAM4D,mBAAYkE,uBACTjB,oBAAaiB,yBAC1BC,SAAS,YACpBnK,EAAEoC,MAAMgI,WAKpB7D,cAAcZ,aAEJ0E,WADW1E,MAAMK,QAAQ,kBACHiD,SAAS,oBACrC9I,eAAemK,eAAeD,WAAY1E,OAE9Ca,cAAcb,aAEJ0E,WADW1E,MAAMK,QAAQ,kBACHiD,SAAS,oBACrC9I,eAAemK,eAAeD,WAAY1E,OAE9Cc,aAAad,aAEH0E,WADW1E,MAAMK,QAAQ,iBACHiD,SAAS,mBACrC9I,eAAemK,eAAeD,WAAY1E,OAG9Ce,YAAYf,cACD9E,uBAAuB,8CAA+C,kBACxEK,MAAKqJ,eACEA,UAAW,OACL3H,SAAW+C,MAAMK,QAAQ,sBAC1BpD,SAASJ,oBAGRgI,QAAU5H,SAASP,KAAK,WAC9BrC,EAAE,kBAAkB6D,IAAI7D,EAAE,kBAAkB6D,MAAQ2G,QAAU,KAC9D5H,SAAS8E,cACJQ,kBACAhD,iBAAiBlF,EAAE,yCAKxC2G,YAAYhB,cACD9E,uBAAuB,8CAA+C,kBACxEK,MAAKqJ,eACEA,UAAW,OACL3H,SAAW+C,MAAMK,QAAQ,sBAC1BpD,SAASJ,oBAGR2F,gBAAkBxC,MAAMK,QAAQ,oBAChCyE,QAAU7H,SAASP,KAAK,WAC9BrC,EAAE,kBAAkB6D,IAAI7D,EAAE,kBAAkB6D,MAAQ4G,QAAU,KAC9D7H,SAAS8E,SACTS,gBAAgBlC,KAAK,gBAAgByE,eAAe,cAKpE9D,WAAWjB,cACA9E,uBAAuB,6CAA8C,kBACvEK,MAAKqJ,eACEA,UAAW,OACL3H,SAAW+C,MAAMK,QAAQ,qBAC1BpD,SAASJ,oBAGRwG,gBAAkBrD,MAAMK,QAAQ,oBAChC2E,OAAS/H,SAASP,KAAK,UAC7BrC,EAAE,iBAAiB6D,IAAI7D,EAAE,iBAAiB6D,MAAQ8G,OAAS,KAC3D/H,SAAS8E,SACTsB,gBAAgB/C,KAAK,gBAAgByE,eAAe,cAKpE5D,QAAQnB,aACE/C,SAAW+C,MAAMK,QAAQ,kBAC/BrD,YAAYC,SAAU,WACjBsF,kBACAhD,iBAAiBlF,EAAE,qCAE5B+G,UAAUpB,aACA/C,SAAW+C,MAAMK,QAAQ,kBAC/BrD,YAAYC,SAAU,aACjBsF,kBACAhD,iBAAiBlF,EAAE,qCAE5BiH,QAAQtB,aACE/C,SAAW+C,MAAMK,QAAQ,kBACzBmC,gBAAkBxC,MAAMK,QAAQ,oBACtCrD,YAAYC,SAAU,MACtBuF,gBAAgBlC,KAAK,gBAAgByE,eAAe,UAExDxD,UAAUvB,aACA/C,SAAW+C,MAAMK,QAAQ,kBACzBmC,gBAAkBxC,MAAMK,QAAQ,oBACtCrD,YAAYC,SAAU,QACtBuF,gBAAgBlC,KAAK,gBAAgByE,eAAe,UAExDtD,OAAOzB,aACG/C,SAAW+C,MAAMK,QAAQ,iBACzBgD,gBAAkBrD,MAAMK,QAAQ,oBACtCrD,YAAYC,SAAU,MACtBoG,gBAAgB/C,KAAK,gBAAgByE,eAAe,UAExDrD,SAAS1B,aACC/C,SAAW+C,MAAMK,QAAQ,iBACzBgD,gBAAkBrD,MAAMK,QAAQ,oBACtCrD,YAAYC,SAAU,QACtBoG,gBAAgB/C,KAAK,gBAAgByE,eAAe,UAGxDb,wBAA0B/D,eAC1B8D,0BAA4B/D,wBAGzB,CACH+E,KAAM,CAACrH,cAAeC,cAAgB,IAAIH,cAAcE,cAAeC"}