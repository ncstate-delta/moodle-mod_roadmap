{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap. Modernized version.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/notification',\n    'core/templates',\n    'mod_roadmap/expand_contract',\n    'mod_roadmap/learningobjectivesconfig',\n    'mod_roadmap/step_icon_select',\n    'mod_roadmap/step_activity_select',\n    'mod_roadmap/step_save',\n    'mod_roadmap/cycle_save',\n    'mod_roadmap/phase_save',\n    'mod_roadmap/repository',\n    'core/modal_delete_cancel',\n    'core/modal_events'\n], (\n    $,\n    notification,\n    templates,\n    expandContract,\n    learningObjectives,\n    stepIconSelect,\n    stepActivitySelect,\n    stepSave,\n    cycleSave,\n    phaseSave,\n    roadmapRepo,\n    ModalDeleteCancel,\n    ModalEvents\n) => {\n\n    const showDeleteConfirmModal = (message, title = 'Confirm delete') => {\n        return ModalDeleteCancel.create({\n            title,\n            body: message\n        }).then(modal => {\n            return new Promise(resolve => {\n                modal.show();\n                modal.getRoot().on(ModalEvents.delete, () => {\n                    resolve(true);\n                    modal.hide();\n                });\n                modal.getRoot().on(ModalEvents.cancel, () => {\n                    resolve(false);\n                    modal.hide();\n                });\n                modal.getRoot().on(ModalEvents.hidden, () => {\n                    modal.destroy();\n                });\n            });\n        });\n    };\n\n    const getMaxValue = dataType => {\n        const ids = [];\n        $(`.${dataType}-wrapper`).each(function() {\n            const id = parseInt($(this).data(`${dataType}id`), 10);\n            if (!isNaN(id)) {\n                ids.push(id);\n            }\n        });\n        return ids.length ? Math.max(...ids) : 0;\n    };\n\n    const moveWrapper = ($wrapper, direction) => {\n        if (direction === 'up') {\n            const $prev = $wrapper.prev();\n            if ($prev.length) {\n                $wrapper.insertBefore($prev);\n            }\n        } else if (direction === 'down') {\n            const $next = $wrapper.next();\n            if ($next.length) {\n                $wrapper.insertAfter($next);\n            }\n        }\n    };\n\n    let colorPatternCache = {};\n\n    class RoadmapConfig {\n        constructor(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n            this.initForm();\n        }\n\n        initForm() {\n            let inputConfigVal = this.configContainer.val();\n            if (!inputConfigVal) {\n                inputConfigVal = JSON.stringify({phases: []});\n                this.configContainer.val(inputConfigVal);\n            }\n            let config;\n            try {\n                config = JSON.parse(inputConfigVal);\n            } catch (e) {\n                notification.exception(e);\n                config = {phases: []};\n            }\n\n            config.phases.forEach(phase => {\n                phase.configuration = JSON.stringify(phase);\n                (phase.cycles || []).forEach(cycle => {\n                    cycle.configuration = JSON.stringify(cycle);\n                    (cycle.steps || []).forEach(step => {\n                        step.configuration = JSON.stringify(step);\n                    });\n                });\n            });\n\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then(html => {\n                    templates.prependNodeContents(this.inputSelector, html);\n\n                    this.bindExpandCollapseControls();\n\n                    $('#roadmapconfiguration')\n                        .off('click', 'a[data-action]')\n                        .on('click', 'a[data-action]', e => this.clickHandler(e));\n\n                    this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n\n                    learningObjectives.refreshChecklists();\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                })\n                .catch(notification.exception);\n\n            $('select[name=\"phasecolorpattern\"]').off('change').on('change', e => {\n                this.phaseColorChange($(e.target));\n            });\n        }\n\n        clickHandler(event) {\n            const $node = $(event.currentTarget);\n            const action = $node.data('action');\n            switch (action) {\n                case 'collapse_all_phases': return this.collapsePhases();\n                case 'expand_all_phases': return this.expandPhases();\n                case 'collapse_all_cycles': return this.collapseCycles($node.closest('.phase-wrapper')\n                    .find('.phase-cycles-container').first());\n                case 'expand_all_cycles': return this.expandCycles($node.closest('.phase-wrapper')\n                    .find('.phase-cycles-container').first());\n                case 'collapse_all_steps': return this.collapseSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'expand_all_steps': return this.expandSteps($node.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n                case 'phase_collapse_control': return this.collapsePhase($node);\n                case 'cycle_collapse_control': return this.collapseCycle($node);\n                case 'step_collapse_control': return this.collapseStep($node);\n                case 'phase_delete_control': return this.deletePhase($node);\n                case 'cycle_delete_control': return this.deleteCycle($node);\n                case 'step_delete_control': return this.deleteStep($node);\n                case 'add_phase': return this.addPhase();\n                case 'phase_up_control': return this.upPhase($node);\n                case 'phase_down_control': return this.downPhase($node);\n                case 'add_phase_cycle': return this.addCycle($node);\n                case 'cycle_up_control': return this.upCycle($node);\n                case 'cycle_down_control': return this.downCycle($node);\n                case 'add_cycle_step': return this.addStep($node);\n                case 'step_up_control': return this.upStep($node);\n                case 'step_down_control': return this.downStep($node);\n                default: return undefined;\n            }\n        }\n\n        phaseColorChange($node) {\n            const colorId = $node.val();\n            if (colorPatternCache[colorId]) {\n                this.applyColorSet(colorPatternCache[colorId]);\n                return;\n            }\n            return roadmapRepo.fetchColorPattern(colorId)\n                .then(colors => {\n                    colorPatternCache[colorId] = colors;\n                    this.applyColorSet(colors);\n                    return colors;\n                })\n                .catch(notification.exception);\n        }\n\n        applyColorSet(colors) {\n            $('.phase-color-display').remove();\n            const $colorTable = $('<div>').addClass('phase-color-display');\n            colors.forEach(color => {\n                $colorTable.append(`<div class=\"color\" style=\"background-color:${color}\"></div>`);\n            });\n            $('select[name=\"phasecolorpattern\"]').parent().append($colorTable);\n\n            $('#roadmapconfiguration #phase-container > .phase-wrapper > div.row').each(function(i) {\n                const numColors = colors.length;\n                const idxColor = i % numColors;\n                $(this).css('border-bottom', `solid 1px ${colors[idxColor]}`);\n            });\n        }\n\n        bindConfigSave() {\n            $('input.phase-configuration').off('change').on('change', () => this.configSave());\n        }\n\n        configSave() {\n            const $phaseContainer = $('#phase-container');\n            const roadmapData = [];\n            let index = 0;\n            $phaseContainer.find('.phase-wrapper .phase-configuration').each(function() {\n                const phaseData = $(this).val() || '{}';\n                const phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index++;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({\n                phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val()\n            }));\n        }\n\n        addPhase() {\n            const config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            const nextIndex = config.phases.length;\n            const maxPhaseId = getMaxValue('phase');\n            const newPhase = {\n                id: maxPhaseId + 1,\n                index: nextIndex,\n                number: nextIndex + 1,\n                title: `Phase ${nextIndex + 1}`,\n                subtitle: `Subtitle ${nextIndex + 1}`\n            };\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n            return templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then(html => {\n                    templates.appendNodeContents('#phase-container', html);\n                    phaseSave.rebindInputs();\n                    this.bindConfigSave();\n                    this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n                })\n                .catch(notification.exception);\n        }\n\n        addCycle($node) {\n            const $phaseContainer = $node.closest('.phase-container');\n            const $cycleContainer = $phaseContainer.children('.phase-cycles-container');\n            const nextCycleIndex = $cycleContainer.children('.cycle-wrapper').length;\n            const maxCycleId = getMaxValue('cycle');\n            const newCycle = {\n                id: maxCycleId + 1,\n                index: nextCycleIndex,\n                number: nextCycleIndex + 1,\n                title: `Cycle ${nextCycleIndex + 1}`,\n                subtitle: `Subtitle ${nextCycleIndex + 1}`\n            };\n            return templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then(html => {\n                    templates.appendNodeContents($cycleContainer, html);\n                    learningObjectives.refreshChecklists();\n                    cycleSave.rebindInputs();\n                    phaseSave.rebindInputs();\n                })\n                .catch(notification.exception);\n        }\n\n        addStep($node) {\n            const $cycleContainer = $node.closest('.cycle-container');\n            const $stepsContainer = $cycleContainer.children('.cycle-steps-container');\n            const nextStepIndex = $stepsContainer.children('.step-wrapper').length;\n            const maxStepId = getMaxValue('step');\n            const iconUrl = $('input[name=\"icon_url\"]').val();\n\n            const newStep = {\n                id: maxStepId + 1,\n                index: nextStepIndex,\n                number: nextStepIndex + 1,\n                stepicon: 'icon-10',\n                iconurl: `${iconUrl}?name=icon-10&percent=100&flags=n`\n            };\n            return templates.render('mod_roadmap/configuration_step', newStep)\n                .then(html => {\n                    templates.appendNodeContents($stepsContainer, html);\n                    stepIconSelect.rebindButtons();\n                    stepActivitySelect.rebindButtons();\n                    stepSave.rebindInputs();\n                    cycleSave.rebindInputs();\n                })\n                .catch(notification.exception);\n        }\n\n        bindExpandCollapseControls() {\n            $('.expand-collapse-controls .collapse_everything').off('click').on('click', e => {\n                e.preventDefault();\n                this.collapseEverything();\n            });\n            $('.expand-collapse-controls .expand_everything').off('click').on('click', e => {\n                e.preventDefault();\n                this.expandEverything();\n            });\n        }\n\n        expandPhases() { this.expandChildrenClass($('#roadmapconfiguration'), 'phase'); }\n        expandCycles(node) { this.expandChildrenClass(node, 'cycle'); }\n        expandSteps(node) { this.expandChildrenClass(node, 'step'); }\n        collapsePhases() {\n            const node = $('#roadmapconfiguration');\n            this.collapseCycles(node);\n            this.collapseChildrenClass(node, 'phase');\n        }\n        collapseCycles(node) {\n            this.collapseSteps(node);\n            this.collapseChildrenClass(node, 'cycle');\n        }\n        collapseSteps(node) { this.collapseChildrenClass(node, 'step'); }\n        expandChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function() {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('hide')) {\n                    $(this).click();\n                }\n            });\n        }\n        collapseChildrenClass($parent, className) {\n            $parent.find(`a[data-action=\"${className}_collapse_control\"]`).each(function() {\n                const $wrapper = $(this).closest(`.${className}-wrapper`);\n                const $container = $wrapper.children(`.${className}-container`);\n                if ($container.hasClass('visible')) {\n                    $(this).click();\n                }\n            });\n        }\n\n        collapsePhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            const $container = $wrapper.children('.phase-container');\n            expandContract.expandCollapse($container, $node);\n        }\n        collapseCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $container = $wrapper.children('.cycle-container');\n            expandContract.expandCollapse($container, $node);\n        }\n        collapseStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $container = $wrapper.children('.step-container');\n            expandContract.expandCollapse($container, $node);\n        }\n\n        deletePhase($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Phase?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.phase-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const phaseId = $wrapper.data('phaseid');\n                        $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                        $wrapper.remove();\n                        this.configSave();\n                        this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n                    }\n                });\n        }\n\n        deleteCycle($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Cycle?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.cycle-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const $phaseContainer = $node.closest('.phase-container');\n                        const cycleId = $wrapper.data('cycleid');\n                        $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                        $wrapper.remove();\n                        $phaseContainer.find('.phase-title').triggerHandler('change');\n                    }\n                });\n        }\n\n        deleteStep($node) {\n            return showDeleteConfirmModal('Are you sure you want to delete this Step?', 'Confirm delete')\n                .then(confirmed => {\n                    if (confirmed) {\n                        const $wrapper = $node.closest('.step-wrapper');\n                        if (!$wrapper.length) {\n                            return;\n                        }\n                        const $cycleContainer = $node.closest('.cycle-container');\n                        const stepId = $wrapper.data('stepid');\n                        $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                        $wrapper.remove();\n                        $cycleContainer.find('.cycle-title').triggerHandler('change');\n                    }\n                });\n        }\n\n        upPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'up');\n            this.configSave();\n            this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n        }\n        downPhase($node) {\n            const $wrapper = $node.closest('.phase-wrapper');\n            moveWrapper($wrapper, 'down');\n            this.configSave();\n            this.phaseColorChange($('select[name=\"phasecolorpattern\"]'));\n        }\n        upCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'up');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        downCycle($node) {\n            const $wrapper = $node.closest('.cycle-wrapper');\n            const $phaseContainer = $node.closest('.phase-container');\n            moveWrapper($wrapper, 'down');\n            $phaseContainer.find('.phase-title').triggerHandler('change');\n        }\n        upStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'up');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n        downStep($node) {\n            const $wrapper = $node.closest('.step-wrapper');\n            const $cycleContainer = $node.closest('.cycle-container');\n            moveWrapper($wrapper, 'down');\n            $cycleContainer.find('.cycle-title').triggerHandler('change');\n        }\n\n        expandEverything() { this.expandPhases(); }\n        collapseEverything() { this.collapsePhases(); }\n    }\n\n    return {\n        init: (inputSelector, inputConfig) => new RoadmapConfig(inputSelector, inputConfig)\n    };\n});"],"names":["define","$","notification","templates","expandContract","learningObjectives","stepIconSelect","stepActivitySelect","stepSave","cycleSave","phaseSave","roadmapRepo","ModalDeleteCancel","ModalEvents","showDeleteConfirmModal","message","title","create","body","then","modal","Promise","resolve","show","getRoot","on","delete","hide","cancel","hidden","destroy","getMaxValue","dataType","ids","each","id","parseInt","this","data","isNaN","push","length","Math","max","moveWrapper","$wrapper","direction","$prev","prev","insertBefore","$next","next","insertAfter","colorPatternCache","RoadmapConfig","constructor","inputSelector","inputConfig","configContainer","initForm","config","inputConfigVal","val","JSON","stringify","phases","parse","e","exception","forEach","phase","configuration","cycles","cycle","steps","step","render","html","prependNodeContents","bindExpandCollapseControls","off","clickHandler","phaseColorChange","refreshChecklists","rebindButtons","rebindInputs","bindConfigSave","require","catch","target","event","$node","currentTarget","collapsePhases","expandPhases","collapseCycles","closest","find","first","expandCycles","collapseSteps","parent","expandSteps","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","addPhase","upPhase","downPhase","addCycle","upCycle","downCycle","addStep","upStep","downStep","colorId","fetchColorPattern","colors","applyColorSet","remove","$colorTable","addClass","color","append","i","idxColor","css","configSave","$phaseContainer","roadmapData","index","phaseData","phaseDataObj","phaseDeletes","cycleDeletes","stepDeletes","nextIndex","newPhase","number","subtitle","appendNodeContents","$cycleContainer","children","nextCycleIndex","newCycle","$stepsContainer","nextStepIndex","maxStepId","iconUrl","newStep","stepicon","iconurl","preventDefault","collapseEverything","expandEverything","expandChildrenClass","node","collapseChildrenClass","$parent","className","hasClass","click","$container","expandCollapse","confirmed","phaseId","cycleId","triggerHandler","stepId","init"],"mappings":"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"}