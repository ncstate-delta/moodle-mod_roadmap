{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/notification',\n        'core/templates',\n        'mod_roadmap/expand_contract',\n        'mod_roadmap/learningobjectivesconfig',\n        'mod_roadmap/step_icon_select',\n        'mod_roadmap/step_activity_select',\n        'mod_roadmap/step_save',\n        'mod_roadmap/cycle_save',\n        'mod_roadmap/phase_save',\n    ],\n    function(\n        $,\n        notification,\n        templates,\n        ec,\n        learningobjectives,\n        stepiconselect,\n        stepactivityselect,\n        stepsave,\n        cyclesave,\n        phasesave,\n    ) {\n\n        /**\n         * Learning objectives config object.\n         * @param {String} inputSelector The hidden input field selector.\n         * @param {String} inputConfig The hidden input configuration.\n         */\n        var RoadmapConfig = function(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n\n            this.initForm();\n        };\n\n        /**\n         * Use configuration data to fill phases, cycle, and step containers.\n         *\n         * @method initForm\n         */\n        RoadmapConfig.prototype.initForm = function() {\n            var self = this;\n            var inputConfigVal = this.configContainer.val();\n            if (inputConfigVal == '') {\n                inputConfigVal = JSON.stringify({'phases': []});\n                this.configContainer.val(inputConfigVal);\n            }\n            var config = JSON.parse(inputConfigVal);\n\n            $.each(config.phases, function(p) {\n                let phase = config.phases[p];\n                phase.configuration = JSON.stringify(phase);\n\n                $.each(phase.cycles, function(c) {\n                    let cycle = phase.cycles[c];\n                    cycle.configuration = JSON.stringify(cycle);\n\n                    $.each(cycle.steps, function(s) {\n                        let step = cycle.steps[s];\n                        step.configuration = JSON.stringify(step);\n                    });\n                });\n            });\n\n            // Dish up the form.\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then(function(html, js) {\n                    templates.prependNodeContents(self.inputSelector, html, js);\n\n                    $('#add-phase').click(function(e) {\n                        RoadmapConfig.prototype.addPhase(e);\n                    });\n                    $('.add-phase-cycle').click(function(e) {\n                        RoadmapConfig.prototype.addCycle(e);\n                    });\n                    $('.add-cycle-step').click(function(e) {\n                        RoadmapConfig.prototype.addStep(e);\n                    });\n\n                    $('.phase-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapsePhase(e);\n                    });\n                    $('.cycle-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapseCycle(e);\n                    });\n                    $('.step-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapseStep(e);\n                    });\n\n                    $('.phase-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deletePhase(e);\n                    });\n                    $('.cycle-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deleteCycle(e);\n                    });\n                    $('.step-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deleteStep(e);\n                    });\n\n                    $('.phase-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upPhase(e);\n                    });\n                    $('.phase-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downPhase(e);\n                    });\n                    $('.cycle-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upCycle(e);\n                    });\n                    $('.cycle-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downCycle(e);\n                    });\n                    $('.step-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upStep(e);\n                    });\n                    $('.step-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downStep(e);\n                    });\n\n                    $('.expand-collapse-controls .collapse_everything').click(function(e) {\n                        RoadmapConfig.prototype.collapseEverything(e);\n                    });\n                    $('.expand-collapse-controls .expand_everything').click(function(e) {\n                        RoadmapConfig.prototype.expandEverything(e);\n                    });\n\n                    // Instead of binding and unbinding specific elements over and over as they are created,\n                    // This event will capture all clicks, always and based on data we can determine the action.\n                    $('#roadmapconfiguration').click(RoadmapConfig.prototype.clickHandler);\n\n                    learningobjectives.refreshChecklists();\n\n                    stepiconselect.rebindButtons();\n                    stepactivityselect.rebindButtons();\n\n                    stepsave.rebindInputs();\n                    cyclesave.rebindInputs();\n                    phasesave.rebindInputs();\n\n                    RoadmapConfig.prototype.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.clickHandler = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.target);\n            var action = thisnode.data('action');\n\n            if (action == 'collapse_all_phases') {\n                RoadmapConfig.prototype.collapsePhases();\n            } else if (action == 'expand_all_phases') {\n                RoadmapConfig.prototype.expandPhases();\n            } else if (action == 'collapse_all_cycles') {\n                RoadmapConfig.prototype.collapseCycles(thisnode.parent('.cycle-container-controls')\n                    .next('.phase-cycles-container'));\n            } else if (action == 'expand_all_cycles') {\n                RoadmapConfig.prototype.expandCycles(thisnode.parent('.cycle-container-controls')\n                    .next('.phase-cycles-container'));\n            } else if (action == 'collapse_all_steps') {\n                RoadmapConfig.prototype.collapseSteps(thisnode.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n            } else if (action == 'expand_all_steps') {\n                RoadmapConfig.prototype.expandSteps(thisnode.parent('.step-container-controls')\n                    .next('.cycle-steps-container'));\n            }\n        };\n\n        RoadmapConfig.prototype.bindConfigSave = function() {\n            $('input.phase-configuration').unbind('change').change(this.configSave.bind(this));\n        };\n\n        RoadmapConfig.prototype.configSave = function() {\n            var phaseContainer = $('#phase-container');\n            var roadmapData = [];\n            let index = 0;\n            $.each(phaseContainer.find('.phase-wrapper .phase-configuration'), function() {\n                let phaseData = $(this).val();\n                if (phaseData == '') {\n                    phaseData = '{}';\n                }\n                let phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index;\n                index = index + 1;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val()\n            }));\n        };\n\n        RoadmapConfig.prototype.addPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            var nextIndex = config.phases.length;\n            var maxPhaseId = parseInt(RoadmapConfig.prototype.maxValue('phase'));\n            var newPhase = {id: maxPhaseId + 1, index: nextIndex, number: nextIndex + 1};\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n\n            templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then(function(html, js) {\n                    templates.appendNodeContents('#phase-container', html, js);\n\n                    $('.phase-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapsePhase(e);\n                        });\n\n                    $('.phase-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deletePhase(e);\n                        });\n\n                    $('.phase-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upPhase(e);\n                        });\n\n                    $('.phase-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downPhase(e);\n                        });\n\n                    $('#add-phase').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addPhase(e);\n                        });\n\n                    $('.add-phase-cycle').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addCycle(e);\n                        });\n\n                    phasesave.rebindInputs();\n                    RoadmapConfig.prototype.bindConfigSave();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseContainer = thisnode.closest('.phase-container');\n            var cycleContainer = phaseContainer.children('.phase-cycles-container');\n\n            var nextCycleIndex = cycleContainer.children('.cycle-wrapper').length;\n            let maxCycleId = parseInt(RoadmapConfig.prototype.maxValue('cycle'));\n            var newCycle = {id: maxCycleId + 1, index: nextCycleIndex, number: nextCycleIndex + 1};\n\n            templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then(function(html, js) {\n                    templates.appendNodeContents(cycleContainer, html, js);\n\n                    $('.cycle-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapseCycle(e);\n                        });\n\n                    $('.cycle-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deleteCycle(e);\n                        });\n\n                    $('.cycle-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upCycle(e);\n                        });\n\n                    $('.cycle-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downCycle(e);\n                        });\n\n                    $('.add-cycle-step').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addStep(e);\n                        });\n\n                    learningobjectives.refreshChecklists();\n                    cyclesave.rebindInputs();\n                    phasesave.rebindInputs();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var stepsContainer = cycleContainer.children('.cycle-steps-container');\n\n            var nextStepIndex = stepsContainer.children('.step-wrapper').length;\n            let maxStepId = parseInt(RoadmapConfig.prototype.maxValue('step'));\n            let iconUrl = $('input[name=\"icon_url\"]').val();\n\n            var newStep = {\n                id: maxStepId + 1,\n                index: nextStepIndex,\n                number: nextStepIndex + 1,\n                stepicon: 'icon-10',\n                iconurl: iconUrl + '?name=icon-10&percent=100&flags=n',\n            };\n\n            templates.render('mod_roadmap/configuration_step', newStep)\n                .then(function(html, js) {\n                    templates.appendNodeContents(stepsContainer, html, js);\n\n                    $('.step-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapseStep(e);\n                        });\n\n                    $('.step-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deleteStep(e);\n                        });\n\n                    $('.step-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upStep(e);\n                        });\n\n                    $('.step-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downStep(e);\n                        });\n\n                    stepiconselect.rebindButtons();\n                    stepactivityselect.rebindButtons();\n                    stepsave.rebindInputs();\n                    cyclesave.rebindInputs();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        //* New expand all and contract all functionality *//\n        RoadmapConfig.prototype.expandPhases = function() {\n            RoadmapConfig.prototype.expandChildrenClass($('#roadmapconfiguration'), 'phase');\n        };\n\n        RoadmapConfig.prototype.expandCycles = function(node) {\n            RoadmapConfig.prototype.expandChildrenClass(node, 'cycle');\n        };\n\n        RoadmapConfig.prototype.expandSteps = function(node) {\n            RoadmapConfig.prototype.expandChildrenClass(node, 'step');\n        };\n\n        RoadmapConfig.prototype.collapsePhases = function() {\n            var node = $('#roadmapconfiguration');\n            RoadmapConfig.prototype.collapseCycles(node);\n            RoadmapConfig.prototype.collapseChildrenClass(node, 'phase');\n        };\n\n        RoadmapConfig.prototype.collapseCycles = function(node) {\n            RoadmapConfig.prototype.collapseSteps(node);\n            RoadmapConfig.prototype.collapseChildrenClass(node, 'cycle');\n        };\n\n        RoadmapConfig.prototype.collapseSteps = function(node) {\n            RoadmapConfig.prototype.collapseChildrenClass(node, 'step');\n        };\n\n        RoadmapConfig.prototype.expandChildrenClass = function(parentNode, groupingName) {\n\n            parentNode.find('a.' + groupingName + '-collapse-control').each(function () {\n                var wrapper = $(this).closest('.' + groupingName + '-wrapper');\n                var container = wrapper.children('.' + groupingName + '-container');\n                if (container.hasClass( \"hide\" )) {\n                    $(this).click();\n                }\n            });\n        };\n\n        RoadmapConfig.prototype.collapseChildrenClass = function(parentNode, groupingName) {\n\n            parentNode.find('a.' + groupingName + '-collapse-control').each(function () {\n                var wrapper = $(this).closest('.' + groupingName + '-wrapper');\n                var container = wrapper.children('.' + groupingName + '-container');\n                if (container.hasClass( \"visible\" )) {\n                    $(this).click();\n                }\n            });\n        };\n\n        RoadmapConfig.prototype.collapsePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var metadata = phaseWrapper.children('.phase-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var metadata = cycleWrapper.children('.cycle-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.step-wrapper');\n            var metadata = cycleWrapper.children('.step-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.deletePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Phase?\")) {\n                var thisnode = $(event.currentTarget);\n                var phaseWrapper = thisnode.closest('.phase-wrapper');\n                var phaseId = phaseWrapper.data('phaseid');\n                $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                phaseWrapper.remove();\n                RoadmapConfig.prototype.configSave();\n            }\n        };\n\n        RoadmapConfig.prototype.deleteCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Cycle?\")) {\n                var thisnode = $(event.currentTarget);\n                var cycleWrapper = thisnode.closest('.cycle-wrapper');\n                var phaseContainer = thisnode.closest('.phase-container');\n                var cycleId = cycleWrapper.data('cycleid');\n                $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                cycleWrapper.remove();\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.deleteStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Step?\")) {\n                var thisnode = $(event.currentTarget);\n                var stepWrapper = thisnode.closest('.step-wrapper');\n                var cycleContainer = thisnode.closest('.cycle-container');\n                var stepId = stepWrapper.data('stepid');\n                $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                stepWrapper.remove();\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var prevPhaseWrapper = phaseWrapper.prev();\n\n            phaseWrapper.insertBefore(prevPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.downPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var nextPhaseWrapper = phaseWrapper.next();\n\n            phaseWrapper.insertAfter(nextPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.upCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var prevCycleWrapper = cycleWrapper.prev();\n\n            if (prevCycleWrapper) {\n                cycleWrapper.insertBefore(prevCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var nextCycleWrapper = cycleWrapper.next();\n\n            if (nextCycleWrapper) {\n                cycleWrapper.insertAfter(nextCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var prevStepWrapper = stepWrapper.prev();\n\n            if (prevStepWrapper) {\n                stepWrapper.insertBefore(prevStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var nextStepWrapper = stepWrapper.next();\n\n            if (nextStepWrapper) {\n                stepWrapper.insertAfter(nextStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.maxValue = function(dataType) {\n            var arrID = new Array();\n            $('.' + dataType + '-wrapper').each(function() {\n                let stepId = parseInt($(this).data(dataType + 'id'));\n                if (isNaN(stepId) === false) {\n                    arrID.push(stepId);\n                }\n            });\n            var newArrID = arrID.sort(function(a, b) {\n                return a - b;\n            });\n\n            return newArrID[arrID.length - 1];\n        };\n\n        return {\n\n            /**\n             * Main initialisation.\n             *\n             * @param {String} inputSelector The hidden input field selector.\n             * @param {String} inputConfig The hidden input configuration.\n             * @return {LearningObjectivesConfig} A new instance of PhasesConfig.\n             * @method init\n             */\n            init: function(inputSelector, inputConfig) {\n                return new RoadmapConfig(inputSelector, inputConfig);\n            }\n        };\n    });\n"],"names":["define","$","notification","templates","ec","learningobjectives","stepiconselect","stepactivityselect","stepsave","cyclesave","phasesave","RoadmapConfig","inputSelector","inputConfig","configContainer","initForm","prototype","self","this","inputConfigVal","val","JSON","stringify","config","parse","each","phases","p","phase","configuration","cycles","c","cycle","steps","s","step","render","then","html","js","prependNodeContents","click","e","addPhase","addCycle","addStep","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","upPhase","downPhase","upCycle","downCycle","upStep","downStep","collapseEverything","expandEverything","clickHandler","refreshChecklists","rebindButtons","rebindInputs","bindConfigSave","require","fail","exception","event","preventDefault","stopPropagation","thisnode","target","action","data","collapsePhases","expandPhases","collapseCycles","parent","next","expandCycles","collapseSteps","expandSteps","unbind","change","configSave","bind","phaseContainer","roadmapData","index","find","phaseData","phaseDataObj","push","phaseDeletes","cycleDeletes","stepDeletes","nextIndex","length","newPhase","id","parseInt","maxValue","number","appendNodeContents","cycleContainer","currentTarget","closest","children","nextCycleIndex","newCycle","stepsContainer","nextStepIndex","newStep","stepicon","iconurl","expandChildrenClass","node","collapseChildrenClass","parentNode","groupingName","hasClass","metadata","expandCollapse","window","confirm","phaseWrapper","phaseId","remove","cycleWrapper","cycleId","triggerHandler","stepWrapper","stepId","prevPhaseWrapper","prev","insertBefore","nextPhaseWrapper","insertAfter","prevCycleWrapper","nextCycleWrapper","prevStepWrapper","nextStepWrapper","dataType","arrID","Array","isNaN","sort","a","b","init"],"mappings":";;;;;;;AAsBAA,oCAAO,CAAC,SACA,oBACA,iBACA,8BACA,uCACA,+BACA,mCACA,wBACA,yBACA,2BAEJ,SACIC,EACAC,aACAC,UACAC,GACAC,mBACAC,eACAC,mBACAC,SACAC,UACAC,eAQIC,cAAgB,SAASC,cAAeC,kBACnCD,cAAgBA,mBAChBE,gBAAkBb,EAAEY,kBAEpBE,mBAQTJ,cAAcK,UAAUD,SAAW,eAC3BE,KAAOC,KACPC,eAAiBD,KAAKJ,gBAAgBM,MACpB,IAAlBD,iBACAA,eAAiBE,KAAKC,UAAU,QAAW,UACtCR,gBAAgBM,IAAID,qBAEzBI,OAASF,KAAKG,MAAML,gBAExBlB,EAAEwB,KAAKF,OAAOG,QAAQ,SAASC,OACvBC,MAAQL,OAAOG,OAAOC,GAC1BC,MAAMC,cAAgBR,KAAKC,UAAUM,OAErC3B,EAAEwB,KAAKG,MAAME,QAAQ,SAASC,OACtBC,MAAQJ,MAAME,OAAOC,GACzBC,MAAMH,cAAgBR,KAAKC,UAAUU,OAErC/B,EAAEwB,KAAKO,MAAMC,OAAO,SAASC,OACrBC,KAAOH,MAAMC,MAAMC,GACvBC,KAAKN,cAAgBR,KAAKC,UAAUa,eAMhDhC,UAAUiC,OAAO,mCAAoCb,QAChDc,MAAK,SAASC,KAAMC,WACjBpC,UAAUqC,oBAAoBvB,KAAKL,cAAe0B,KAAMC,IAExDtC,EAAE,cAAcwC,OAAM,SAASC,GAC3B/B,cAAcK,UAAU2B,SAASD,MAErCzC,EAAE,oBAAoBwC,OAAM,SAASC,GACjC/B,cAAcK,UAAU4B,SAASF,MAErCzC,EAAE,mBAAmBwC,OAAM,SAASC,GAChC/B,cAAcK,UAAU6B,QAAQH,MAGpCzC,EAAE,2BAA2BwC,OAAM,SAASC,GACxC/B,cAAcK,UAAU8B,cAAcJ,MAE1CzC,EAAE,2BAA2BwC,OAAM,SAASC,GACxC/B,cAAcK,UAAU+B,cAAcL,MAE1CzC,EAAE,0BAA0BwC,OAAM,SAASC,GACvC/B,cAAcK,UAAUgC,aAAaN,MAGzCzC,EAAE,yBAAyBwC,OAAM,SAASC,GACtC/B,cAAcK,UAAUiC,YAAYP,MAExCzC,EAAE,yBAAyBwC,OAAM,SAASC,GACtC/B,cAAcK,UAAUkC,YAAYR,MAExCzC,EAAE,wBAAwBwC,OAAM,SAASC,GACrC/B,cAAcK,UAAUmC,WAAWT,MAGvCzC,EAAE,qBAAqBwC,OAAM,SAASC,GAClC/B,cAAcK,UAAUoC,QAAQV,MAEpCzC,EAAE,uBAAuBwC,OAAM,SAASC,GACpC/B,cAAcK,UAAUqC,UAAUX,MAEtCzC,EAAE,qBAAqBwC,OAAM,SAASC,GAClC/B,cAAcK,UAAUsC,QAAQZ,MAEpCzC,EAAE,uBAAuBwC,OAAM,SAASC,GACpC/B,cAAcK,UAAUuC,UAAUb,MAEtCzC,EAAE,oBAAoBwC,OAAM,SAASC,GACjC/B,cAAcK,UAAUwC,OAAOd,MAEnCzC,EAAE,sBAAsBwC,OAAM,SAASC,GACnC/B,cAAcK,UAAUyC,SAASf,MAGrCzC,EAAE,kDAAkDwC,OAAM,SAASC,GAC/D/B,cAAcK,UAAU0C,mBAAmBhB,MAE/CzC,EAAE,gDAAgDwC,OAAM,SAASC,GAC7D/B,cAAcK,UAAU2C,iBAAiBjB,MAK7CzC,EAAE,yBAAyBwC,MAAM9B,cAAcK,UAAU4C,cAEzDvD,mBAAmBwD,oBAEnBvD,eAAewD,gBACfvD,mBAAmBuD,gBAEnBtD,SAASuD,eACTtD,UAAUsD,eACVrD,UAAUqD,eAEVpD,cAAcK,UAAUgD,iBAExBC,QAAQ,CAAC,uBACF,QACRC,KAAKhE,aAAaiE,YAG7BxD,cAAcK,UAAU4C,aAAe,SAASQ,OAC5CA,MAAMC,iBACND,MAAME,sBAEFC,SAAWtE,EAAEmE,MAAMI,QACnBC,OAASF,SAASG,KAAK,UAEb,uBAAVD,OACA9D,cAAcK,UAAU2D,iBACP,qBAAVF,OACP9D,cAAcK,UAAU4D,eACP,uBAAVH,OACP9D,cAAcK,UAAU6D,eAAeN,SAASO,OAAO,6BAClDC,KAAK,4BACO,qBAAVN,OACP9D,cAAcK,UAAUgE,aAAaT,SAASO,OAAO,6BAChDC,KAAK,4BACO,sBAAVN,OACP9D,cAAcK,UAAUiE,cAAcV,SAASO,OAAO,4BACjDC,KAAK,2BACO,oBAAVN,QACP9D,cAAcK,UAAUkE,YAAYX,SAASO,OAAO,4BAC/CC,KAAK,4BAIlBpE,cAAcK,UAAUgD,eAAiB,WACrC/D,EAAE,6BAA6BkF,OAAO,UAAUC,OAAOlE,KAAKmE,WAAWC,KAAKpE,QAGhFP,cAAcK,UAAUqE,WAAa,eAC7BE,eAAiBtF,EAAE,oBACnBuF,YAAc,OACdC,MAAQ,EACZxF,EAAEwB,KAAK8D,eAAeG,KAAK,wCAAwC,eAC3DC,UAAY1F,EAAEiB,MAAME,MACP,IAAbuE,YACAA,UAAY,UAEZC,aAAevE,KAAKG,MAAMmE,WAC9BC,aAAaH,MAAQA,MACrBA,OAAgB,EAChBD,YAAYK,KAAKD,iBAErB3F,EAAE,sCAAsCmB,IAAIC,KAAKC,UAAU,CAACI,OAAQ8D,YAChEM,aAAc7F,EAAE,kBAAkBmB,MAClC2E,aAAc9F,EAAE,kBAAkBmB,MAClC4E,YAAa/F,EAAE,iBAAiBmB,UAIxCT,cAAcK,UAAU2B,SAAW,SAASyB,OACxCA,MAAMC,iBACND,MAAME,sBAEF/C,OAASF,KAAKG,MAAMvB,EAAE,sCAAsCmB,OAC5D6E,UAAY1E,OAAOG,OAAOwE,OAE1BC,SAAW,CAACC,GADCC,SAAS1F,cAAcK,UAAUsF,SAAS,UAC1B,EAAGb,MAAOQ,UAAWM,OAAQN,UAAY,GAC1E1E,OAAOG,OAAOmE,KAAKM,UACnBlG,EAAE,sCAAsCmB,IAAIC,KAAKC,UAAUC,SAE3DpB,UAAUiC,OAAO,kCAAmC+D,UAC/C9D,MAAK,SAASC,KAAMC,WACjBpC,UAAUqG,mBAAmB,mBAAoBlE,KAAMC,IAEvDtC,EAAE,2BAA2BkF,OAAO,SAC/B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAU8B,cAAcJ,MAG9CzC,EAAE,yBAAyBkF,OAAO,SAC7B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUiC,YAAYP,MAG5CzC,EAAE,qBAAqBkF,OAAO,SACzB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUoC,QAAQV,MAGxCzC,EAAE,uBAAuBkF,OAAO,SAC3B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUqC,UAAUX,MAG1CzC,EAAE,cAAckF,OAAO,SAClB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAU2B,SAASD,MAGzCzC,EAAE,oBAAoBkF,OAAO,SACxB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAU4B,SAASF,MAGzChC,UAAUqD,eACVpD,cAAcK,UAAUgD,iBACjB,QACRE,KAAKhE,aAAaiE,YAG7BxD,cAAcK,UAAU4B,SAAW,SAASwB,OACxCA,MAAMC,iBACND,MAAME,sBAGFmC,eAFWxG,EAAEmE,MAAMsC,eACOC,QAAQ,oBACFC,SAAS,2BAEzCC,eAAiBJ,eAAeG,SAAS,kBAAkBV,WAE3DY,SAAW,CAACV,GADCC,SAAS1F,cAAcK,UAAUsF,SAAS,UAC1B,EAAGb,MAAOoB,eAAgBN,OAAQM,eAAiB,GAEpF1G,UAAUiC,OAAO,kCAAmC0E,UAC/CzE,MAAK,SAASC,KAAMC,WACjBpC,UAAUqG,mBAAmBC,eAAgBnE,KAAMC,IAEnDtC,EAAE,2BAA2BkF,OAAO,SAC/B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAU+B,cAAcL,MAG9CzC,EAAE,yBAAyBkF,OAAO,SAC7B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUkC,YAAYR,MAG5CzC,EAAE,qBAAqBkF,OAAO,SACzB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUsC,QAAQZ,MAGxCzC,EAAE,uBAAuBkF,OAAO,SAC3B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUuC,UAAUb,MAG1CzC,EAAE,mBAAmBkF,OAAO,SACvB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAU6B,QAAQH,MAGxCrC,mBAAmBwD,oBACnBpD,UAAUsD,eACVrD,UAAUqD,eACH,QACRG,KAAKhE,aAAaiE,YAG7BxD,cAAcK,UAAU6B,QAAU,SAASuB,OACvCA,MAAMC,iBACND,MAAME,sBAGFyC,eAFW9G,EAAEmE,MAAMsC,eACOC,QAAQ,oBACFC,SAAS,0BAEzCI,cAAgBD,eAAeH,SAAS,iBAAiBV,WAIzDe,QAAU,CACVb,GAJYC,SAAS1F,cAAcK,UAAUsF,SAAS,SAItC,EAChBb,MAAOuB,cACPT,OAAQS,cAAgB,EACxBE,SAAU,UACVC,QAPUlH,EAAE,0BAA0BmB,MAOnB,qCAGvBjB,UAAUiC,OAAO,iCAAkC6E,SAC9C5E,MAAK,SAASC,KAAMC,WACjBpC,UAAUqG,mBAAmBO,eAAgBzE,KAAMC,IAEnDtC,EAAE,0BAA0BkF,OAAO,SAC9B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUgC,aAAaN,MAG7CzC,EAAE,wBAAwBkF,OAAO,SAC5B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUmC,WAAWT,MAG3CzC,EAAE,oBAAoBkF,OAAO,SACxB1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUwC,OAAOd,MAGvCzC,EAAE,sBAAsBkF,OAAO,SAC1B1C,OAAM,SAASC,GACZ/B,cAAcK,UAAUyC,SAASf,MAGzCpC,eAAewD,gBACfvD,mBAAmBuD,gBACnBtD,SAASuD,eACTtD,UAAUsD,eACH,QACRG,KAAKhE,aAAaiE,YAI7BxD,cAAcK,UAAU4D,aAAe,WACnCjE,cAAcK,UAAUoG,oBAAoBnH,EAAE,yBAA0B,UAG5EU,cAAcK,UAAUgE,aAAe,SAASqC,MAC5C1G,cAAcK,UAAUoG,oBAAoBC,KAAM,UAGtD1G,cAAcK,UAAUkE,YAAc,SAASmC,MAC3C1G,cAAcK,UAAUoG,oBAAoBC,KAAM,SAGtD1G,cAAcK,UAAU2D,eAAiB,eACjC0C,KAAOpH,EAAE,yBACbU,cAAcK,UAAU6D,eAAewC,MACvC1G,cAAcK,UAAUsG,sBAAsBD,KAAM,UAGxD1G,cAAcK,UAAU6D,eAAiB,SAASwC,MAC9C1G,cAAcK,UAAUiE,cAAcoC,MACtC1G,cAAcK,UAAUsG,sBAAsBD,KAAM,UAGxD1G,cAAcK,UAAUiE,cAAgB,SAASoC,MAC7C1G,cAAcK,UAAUsG,sBAAsBD,KAAM,SAGxD1G,cAAcK,UAAUoG,oBAAsB,SAASG,WAAYC,cAE/DD,WAAW7B,KAAK,KAAO8B,aAAe,qBAAqB/F,MAAK,WAC9CxB,EAAEiB,MAAMyF,QAAQ,IAAMa,aAAe,YAC3BZ,SAAS,IAAMY,aAAe,cACxCC,SAAU,SACpBxH,EAAEiB,MAAMuB,YAKpB9B,cAAcK,UAAUsG,sBAAwB,SAASC,WAAYC,cAEjED,WAAW7B,KAAK,KAAO8B,aAAe,qBAAqB/F,MAAK,WAC9CxB,EAAEiB,MAAMyF,QAAQ,IAAMa,aAAe,YAC3BZ,SAAS,IAAMY,aAAe,cACxCC,SAAU,YACpBxH,EAAEiB,MAAMuB,YAKpB9B,cAAcK,UAAU8B,cAAgB,SAASsB,OAC7CA,MAAMC,iBACND,MAAME,sBACFC,SAAWtE,EAAEmE,MAAMsC,eAEnBgB,SADenD,SAASoC,QAAQ,kBACRC,SAAS,oBACrCxG,GAAGuH,eAAeD,SAAUnD,WAGhC5D,cAAcK,UAAU+B,cAAgB,SAASqB,OAC7CA,MAAMC,iBACND,MAAME,sBACFC,SAAWtE,EAAEmE,MAAMsC,eAEnBgB,SADenD,SAASoC,QAAQ,kBACRC,SAAS,oBACrCxG,GAAGuH,eAAeD,SAAUnD,WAGhC5D,cAAcK,UAAUgC,aAAe,SAASoB,OAC5CA,MAAMC,iBACND,MAAME,sBACFC,SAAWtE,EAAEmE,MAAMsC,eAEnBgB,SADenD,SAASoC,QAAQ,iBACRC,SAAS,mBACrCxG,GAAGuH,eAAeD,SAAUnD,WAGhC5D,cAAcK,UAAUiC,YAAc,SAASmB,UAC3CA,MAAMC,iBACND,MAAME,kBACFsD,OAAOC,QAAQ,+CAAgD,KAE3DC,aADW7H,EAAEmE,MAAMsC,eACKC,QAAQ,kBAChCoB,QAAUD,aAAapD,KAAK,WAChCzE,EAAE,kBAAkBmB,IAAInB,EAAE,kBAAkBmB,MAAQ2G,QAAU,KAC9DD,aAAaE,SACbrH,cAAcK,UAAUqE,eAIhC1E,cAAcK,UAAUkC,YAAc,SAASkB,UAC3CA,MAAMC,iBACND,MAAME,kBACFsD,OAAOC,QAAQ,+CAAgD,KAC3DtD,SAAWtE,EAAEmE,MAAMsC,eACnBuB,aAAe1D,SAASoC,QAAQ,kBAChCpB,eAAiBhB,SAASoC,QAAQ,oBAClCuB,QAAUD,aAAavD,KAAK,WAChCzE,EAAE,kBAAkBmB,IAAInB,EAAE,kBAAkBmB,MAAQ8G,QAAU,KAC9DD,aAAaD,SACbzC,eAAeG,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUmC,WAAa,SAASiB,UAC1CA,MAAMC,iBACND,MAAME,kBACFsD,OAAOC,QAAQ,8CAA+C,KAC1DtD,SAAWtE,EAAEmE,MAAMsC,eACnB0B,YAAc7D,SAASoC,QAAQ,iBAC/BF,eAAiBlC,SAASoC,QAAQ,oBAClC0B,OAASD,YAAY1D,KAAK,UAC9BzE,EAAE,iBAAiBmB,IAAInB,EAAE,iBAAiBmB,MAAQiH,OAAS,KAC3DD,YAAYJ,SACZvB,eAAef,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUoC,QAAU,SAASgB,OACvCA,MAAMC,iBACND,MAAME,sBAGFwD,aADW7H,EAAEmE,MAAMsC,eACKC,QAAQ,kBAChC2B,iBAAmBR,aAAaS,OAEpCT,aAAaU,aAAaF,kBAC1B3H,cAAcK,UAAUqE,cAG5B1E,cAAcK,UAAUqC,UAAY,SAASe,OACzCA,MAAMC,iBACND,MAAME,sBAGFwD,aADW7H,EAAEmE,MAAMsC,eACKC,QAAQ,kBAChC8B,iBAAmBX,aAAa/C,OAEpC+C,aAAaY,YAAYD,kBACzB9H,cAAcK,UAAUqE,cAG5B1E,cAAcK,UAAUsC,QAAU,SAASc,OACvCA,MAAMC,iBACND,MAAME,sBAEFC,SAAWtE,EAAEmE,MAAMsC,eACnBuB,aAAe1D,SAASoC,QAAQ,kBAChCpB,eAAiBhB,SAASoC,QAAQ,oBAClCgC,iBAAmBV,aAAaM,OAEhCI,mBACAV,aAAaO,aAAaG,kBAC1BpD,eAAeG,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUuC,UAAY,SAASa,OACzCA,MAAMC,iBACND,MAAME,sBAEFC,SAAWtE,EAAEmE,MAAMsC,eACnBuB,aAAe1D,SAASoC,QAAQ,kBAChCpB,eAAiBhB,SAASoC,QAAQ,oBAClCiC,iBAAmBX,aAAalD,OAEhC6D,mBACAX,aAAaS,YAAYE,kBACzBrD,eAAeG,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUwC,OAAS,SAASY,OACtCA,MAAMC,iBACND,MAAME,sBAEFC,SAAWtE,EAAEmE,MAAMsC,eACnB0B,YAAc7D,SAASoC,QAAQ,iBAC/BF,eAAiBlC,SAASoC,QAAQ,oBAClCkC,gBAAkBT,YAAYG,OAE9BM,kBACAT,YAAYI,aAAaK,iBACzBpC,eAAef,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUyC,SAAW,SAASW,OACxCA,MAAMC,iBACND,MAAME,sBAEFC,SAAWtE,EAAEmE,MAAMsC,eACnB0B,YAAc7D,SAASoC,QAAQ,iBAC/BF,eAAiBlC,SAASoC,QAAQ,oBAClCmC,gBAAkBV,YAAYrD,OAE9B+D,kBACAV,YAAYM,YAAYI,iBACxBrC,eAAef,KAAK,gBAAgByC,eAAe,YAI3DxH,cAAcK,UAAUsF,SAAW,SAASyC,cACpCC,MAAQ,IAAIC,aAChBhJ,EAAE,IAAM8I,SAAW,YAAYtH,MAAK,eAC5B4G,OAAShC,SAASpG,EAAEiB,MAAMwD,KAAKqE,SAAW,QACxB,IAAlBG,MAAMb,SACNW,MAAMnD,KAAKwC,WAGJW,MAAMG,MAAK,SAASC,EAAGC,UAC3BD,EAAIC,KAGCL,MAAM9C,OAAS,IAG5B,CAUHoD,KAAM,SAAS1I,cAAeC,oBACnB,IAAIF,cAAcC,cAAeC"}