{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/notification', 'core/templates', 'mod_roadmap/expand_contract',\n        'mod_roadmap/learningobjectivesconfig', 'mod_roadmap/step_icon_select', 'mod_roadmap/step_activity_select',\n        'mod_roadmap/step_save', 'mod_roadmap/cycle_save', 'mod_roadmap/phase_save'],\n    function($, notification, templates, ec, learningobjectives, stepiconselect,\n             stepactivityselect, stepsave, cyclesave, phasesave) {\n\n        /**\n         * Learning objectives config object.\n         * @param {String} inputSelector The hidden input field selector.\n         * @param {String} inputConfig The hidden input configuration.\n         */\n        var RoadmapConfig = function(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n\n            this.initForm();\n        };\n\n        /**\n         * Use configuration data to fill phases, cycle, and step containers.\n         *\n         * @method initForm\n         */\n        RoadmapConfig.prototype.initForm = function() {\n            var self = this;\n            var inputConfigVal = this.configContainer.val();\n            if (inputConfigVal == '') {\n                inputConfigVal = JSON.stringify({'phases': []});\n                this.configContainer.val(inputConfigVal);\n            }\n            var config = JSON.parse(inputConfigVal);\n\n            $.each(config.phases, function(p) {\n                let phase = config.phases[p];\n                phase.number = p + 1;\n                phase.index = p;\n                phase.configuration = JSON.stringify(phase);\n\n                $.each(phase.cycles, function(c) {\n                    let cycle = phase.cycles[c];\n                    cycle.number = c + 1;\n                    cycle.index = c;\n                    cycle.configuration = JSON.stringify(cycle);\n\n                    $.each(cycle.steps, function(s) {\n                        let step = cycle.steps[s];\n                        step.number = s + 1;\n                        step.index = s;\n                        step.configuration = JSON.stringify(step);\n                    });\n                });\n            });\n\n            // Dish up the form.\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then(function(html, js) {\n                    templates.prependNodeContents(self.inputSelector, html, js);\n\n                    $('#add-phase').click(function(e) {\n                        RoadmapConfig.prototype.addPhase(e);\n                    });\n                    $('.add-phase-cycle').click(function(e) {\n                        RoadmapConfig.prototype.addCycle(e);\n                    });\n                    $('.add-cycle-step').click(function(e) {\n                        RoadmapConfig.prototype.addStep(e);\n                    });\n\n                    $('.phase-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapsePhase(e);\n                    });\n                    $('.cycle-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapseCycle(e);\n                    });\n                    $('.step-collapse-control').click(function(e) {\n                        RoadmapConfig.prototype.collapseStep(e);\n                    });\n\n                    $('.phase-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deletePhase(e);\n                    });\n                    $('.cycle-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deleteCycle(e);\n                    });\n                    $('.step-delete-control').click(function(e) {\n                        RoadmapConfig.prototype.deleteStep(e);\n                    });\n\n                    $('.phase-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upPhase(e);\n                    });\n                    $('.phase-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downPhase(e);\n                    });\n                    $('.cycle-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upCycle(e);\n                    });\n                    $('.cycle-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downCycle(e);\n                    });\n                    $('.step-up-control').click(function(e) {\n                        RoadmapConfig.prototype.upStep(e);\n                    });\n                    $('.step-down-control').click(function(e) {\n                        RoadmapConfig.prototype.downStep(e);\n                    });\n\n                    learningobjectives.refreshChecklists();\n\n                    stepiconselect.rebindButtons();\n                    stepactivityselect.rebindButtons();\n\n                    stepsave.rebindInputs();\n                    cyclesave.rebindInputs();\n                    phasesave.rebindInputs();\n\n                    RoadmapConfig.prototype.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.bindConfigSave = function() {\n            $('input.phase-configuration').unbind('change').change(this.configSave.bind(this));\n        };\n\n        RoadmapConfig.prototype.configSave = function() {\n            var phaseContainer = $('#phase-container');\n            var roadmapData = [];\n            let index = 0;\n            $.each(phaseContainer.find('.phase-wrapper .phase-configuration'), function() {\n                let phaseData = $(this).val();\n                if (phaseData == '') {\n                    phaseData = '{}';\n                }\n                let phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index;\n                index = index + 1;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val()\n            }));\n        };\n\n        RoadmapConfig.prototype.addPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            var nextIndex = config.phases.length;\n            var maxPhaseId = parseInt(RoadmapConfig.prototype.maxValue('phase'));\n            var newPhase = {id: maxPhaseId + 1, index: nextIndex, number: nextIndex + 1};\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n\n            templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then(function(html, js) {\n                    templates.appendNodeContents('#phase-container', html, js);\n\n                    $('.phase-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapsePhase(e);\n                        });\n\n                    $('.phase-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deletePhase(e);\n                        });\n\n                    $('.phase-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upPhase(e);\n                        });\n\n                    $('.phase-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downPhase(e);\n                        });\n\n                    $('#add-phase').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addPhase(e);\n                        });\n\n                    $('.add-phase-cycle').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addCycle(e);\n                        });\n\n                    phasesave.rebindInputs();\n                    RoadmapConfig.prototype.bindConfigSave();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseContainer = thisnode.closest('.phase-container');\n            var cycleContainer = phaseContainer.children('.phase-cycles-container');\n\n            var nextCycleIndex = cycleContainer.children('.cycle-wrapper').length;\n            let maxCycleId = parseInt(RoadmapConfig.prototype.maxValue('cycle'));\n            var newCycle = {id: maxCycleId + 1, index: nextCycleIndex, number: nextCycleIndex + 1};\n\n            templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then(function(html, js) {\n                    templates.appendNodeContents(cycleContainer, html, js);\n\n                    $('.cycle-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapseCycle(e);\n                        });\n\n                    $('.cycle-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deleteCycle(e);\n                        });\n\n                    $('.cycle-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upCycle(e);\n                        });\n\n                    $('.cycle-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downCycle(e);\n                        });\n\n                    $('.add-cycle-step').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.addStep(e);\n                        });\n\n                    learningobjectives.refreshChecklists();\n                    cyclesave.rebindInputs();\n                    phasesave.rebindInputs();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var stepsContainer = cycleContainer.children('.cycle-steps-container');\n\n            var nextStepIndex = stepsContainer.children('.step-wrapper').length;\n            let maxStepId = parseInt(RoadmapConfig.prototype.maxValue('step'));\n            let iconUrl = $('input[name=\"icon_url\"]').val();\n\n            var newStep = {\n                id: maxStepId + 1,\n                index: nextStepIndex,\n                number: nextStepIndex + 1,\n                stepicon: 'icon-10',\n                iconurl: iconUrl + '?name=icon-10&percent=100&flags=n',\n            };\n\n            templates.render('mod_roadmap/configuration_step', newStep)\n                .then(function(html, js) {\n                    templates.appendNodeContents(stepsContainer, html, js);\n\n                    $('.step-collapse-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.collapseStep(e);\n                        });\n\n                    $('.step-delete-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.deleteStep(e);\n                        });\n\n                    $('.step-up-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.upStep(e);\n                        });\n\n                    $('.step-down-control').unbind('click')\n                        .click(function(e) {\n                            RoadmapConfig.prototype.downStep(e);\n                        });\n\n                    stepiconselect.rebindButtons();\n                    stepactivityselect.rebindButtons();\n                    stepsave.rebindInputs();\n                    cyclesave.rebindInputs();\n                    return null;\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.collapsePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var metadata = phaseWrapper.children('.phase-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var metadata = cycleWrapper.children('.cycle-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.step-wrapper');\n            var metadata = cycleWrapper.children('.step-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.deletePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Phase?\")) {\n                var thisnode = $(event.currentTarget);\n                var phaseWrapper = thisnode.closest('.phase-wrapper');\n                var phaseId = phaseWrapper.data('phaseid');\n                $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                phaseWrapper.remove();\n                RoadmapConfig.prototype.configSave();\n            }\n        };\n\n        RoadmapConfig.prototype.deleteCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Cycle?\")) {\n                var thisnode = $(event.currentTarget);\n                var cycleWrapper = thisnode.closest('.cycle-wrapper');\n                var phaseContainer = thisnode.closest('.phase-container');\n                var cycleId = cycleWrapper.data('cycleid');\n                $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                cycleWrapper.remove();\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.deleteStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (window.confirm(\"Are you sure you want to delete this Step?\")) {\n                var thisnode = $(event.currentTarget);\n                var stepWrapper = thisnode.closest('.step-wrapper');\n                var cycleContainer = thisnode.closest('.cycle-container');\n                var stepId = stepWrapper.data('stepid');\n                $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                stepWrapper.remove();\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var prevPhaseWrapper = phaseWrapper.prev();\n\n            phaseWrapper.insertBefore(prevPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.downPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var nextPhaseWrapper = phaseWrapper.next();\n\n            phaseWrapper.insertAfter(nextPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.upCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var prevCycleWrapper = cycleWrapper.prev();\n\n            if (prevCycleWrapper) {\n                cycleWrapper.insertBefore(prevCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var nextCycleWrapper = cycleWrapper.next();\n\n            if (nextCycleWrapper) {\n                cycleWrapper.insertAfter(nextCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var prevStepWrapper = stepWrapper.prev();\n\n            if (prevStepWrapper) {\n                stepWrapper.insertBefore(prevStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var nextStepWrapper = stepWrapper.next();\n\n            if (nextStepWrapper) {\n                stepWrapper.insertAfter(nextStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.maxValue = function(dataType) {\n            var arrID = new Array();\n            $('.' + dataType + '-wrapper').each(function() {\n                let stepId = parseInt($(this).data(dataType + 'id'));\n                if (isNaN(stepId) === false) {\n                    arrID.push(stepId);\n                }\n            });\n            var newArrID = arrID.sort(function(a, b) {\n                return a - b;\n            });\n\n            return newArrID[arrID.length - 1];\n        };\n\n        return {\n\n            /**\n             * Main initialisation.\n             *\n             * @param {String} inputSelector The hidden input field selector.\n             * @param {String} inputConfig The hidden input configuration.\n             * @return {LearningObjectivesConfig} A new instance of PhasesConfig.\n             * @method init\n             */\n            init: function(inputSelector, inputConfig) {\n                return new RoadmapConfig(inputSelector, inputConfig);\n            }\n        };\n    });\n"],"names":["define","$","notification","templates","ec","learningobjectives","stepiconselect","stepactivityselect","stepsave","cyclesave","phasesave","RoadmapConfig","inputSelector","inputConfig","configContainer","initForm","prototype","self","this","inputConfigVal","val","JSON","stringify","config","parse","each","phases","p","phase","number","index","configuration","cycles","c","cycle","steps","s","step","render","then","html","js","prependNodeContents","click","e","addPhase","addCycle","addStep","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","upPhase","downPhase","upCycle","downCycle","upStep","downStep","refreshChecklists","rebindButtons","rebindInputs","bindConfigSave","require","fail","exception","unbind","change","configSave","bind","phaseContainer","roadmapData","find","phaseData","phaseDataObj","push","phaseDeletes","cycleDeletes","stepDeletes","event","preventDefault","stopPropagation","nextIndex","length","newPhase","id","parseInt","maxValue","appendNodeContents","cycleContainer","currentTarget","closest","children","nextCycleIndex","newCycle","stepsContainer","nextStepIndex","newStep","stepicon","iconurl","thisnode","metadata","expandCollapse","window","confirm","phaseWrapper","phaseId","data","remove","cycleWrapper","cycleId","triggerHandler","stepWrapper","stepId","prevPhaseWrapper","prev","insertBefore","nextPhaseWrapper","next","insertAfter","prevCycleWrapper","nextCycleWrapper","prevStepWrapper","nextStepWrapper","dataType","arrID","Array","isNaN","sort","a","b","init"],"mappings":"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"}