{"version":3,"file":"roadmap_config.min.js","sources":["../src/roadmap_config.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the configuration of the roadmap.\n *\n * @module     mod_roadmap/roadmapconfig\n * @copyright  2021 Steve Bader <smbader@ncsu.edu>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/notification', 'core/templates', 'mod_roadmap/expand_contract',\n        'mod_roadmap/learningobjectivesconfig', 'mod_roadmap/step_icon_select', 'mod_roadmap/step_activity_select',\n        'mod_roadmap/step_save', 'mod_roadmap/cycle_save', 'mod_roadmap/phase_save'],\n    function($, notification, templates, ec, learningobjectives, stepiconselect,\n             stepactivityselect, stepsave, cyclesave, phasesave) {\n\n        /**\n         * Learning objectives config object.\n         * @param {String} inputSelector The hidden input field selector.\n         * @param {String} inputConfig The hidden input configuration.\n         */\n        var RoadmapConfig = function(inputSelector, inputConfig) {\n            this.inputSelector = inputSelector;\n            this.configContainer = $(inputConfig);\n\n            this.initForm();\n        };\n\n        /**\n         * Displays the scale configuration dialogue.\n         *\n         * @method initForm\n         */\n        RoadmapConfig.prototype.initForm = function() {\n            var self = this;\n            var inputConfigVal = this.configContainer.val();\n            if (inputConfigVal == '') {\n                inputConfigVal = JSON.stringify({ 'phases':[] });\n                this.configContainer.val(inputConfigVal);\n            }\n            var config = JSON.parse(inputConfigVal);\n\n            $.each(config.phases, function(p) {\n                let phase = config.phases[p];\n                phase.number = p + 1;\n                phase.index = p;\n                phase.configuration = JSON.stringify(phase);\n\n                $.each(phase.cycles, function(c) {\n                    let cycle = phase.cycles[c];\n                    cycle.number = c + 1;\n                    cycle.index = c;\n                    cycle.configuration = JSON.stringify(cycle);\n\n                    $.each(cycle.steps, function(s) {\n                        let step = cycle.steps[s];\n                        step.number = s + 1;\n                        step.index = s;\n                        step.configuration = JSON.stringify(step);\n                    });\n                });\n            });\n\n            // Dish up the form.\n            templates.render('mod_roadmap/configuration_phases', config)\n                .then(function(html, js) {\n                    templates.prependNodeContents(self.inputSelector, html, js);\n\n                    $('#add-phase').click(function(e) { RoadmapConfig.prototype.addPhase(e); });\n                    $('.add-phase-cycle').click(function(e) { RoadmapConfig.prototype.addCycle(e); });\n                    $('.add-cycle-step').click(function(e) { RoadmapConfig.prototype.addStep(e); });\n\n                    $('.phase-collapse-control').click(function(e) { RoadmapConfig.prototype.collapsePhase(e); });\n                    $('.cycle-collapse-control').click(function(e) { RoadmapConfig.prototype.collapseCycle(e); });\n                    $('.step-collapse-control').click(function(e) { RoadmapConfig.prototype.collapseStep(e); });\n\n                    $('.phase-delete-control').click(function (e) { RoadmapConfig.prototype.deletePhase(e); });\n                    $('.cycle-delete-control').click(function (e) { RoadmapConfig.prototype.deleteCycle(e); });\n                    $('.step-delete-control').click(function (e) { RoadmapConfig.prototype.deleteStep(e); });\n\n                    $('.phase-up-control').click(function (e) { RoadmapConfig.prototype.upPhase(e); });\n                    $('.phase-down-control').click(function (e) { RoadmapConfig.prototype.downPhase(e); });\n                    $('.cycle-up-control').click(function (e) { RoadmapConfig.prototype.upCycle(e); });\n                    $('.cycle-down-control').click(function (e) { RoadmapConfig.prototype.downCycle(e); });\n                    $('.step-up-control').click(function (e) { RoadmapConfig.prototype.upStep(e); });\n                    $('.step-down-control').click(function (e) { RoadmapConfig.prototype.downStep(e); });\n\n                    learningobjectives.refresh_checklists();\n\n                    stepiconselect.rebind_buttons();\n                    stepactivityselect.rebind_buttons();\n\n                    stepsave.rebind_inputs();\n                    cyclesave.rebind_inputs();\n                    phasesave.rebind_inputs();\n\n                    RoadmapConfig.prototype.bindConfigSave();\n\n                    require(['theme_boost/loader']);\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.bindConfigSave = function() {\n            $('input.phase-configuration').unbind('change').change(this.configSave.bind(this));\n        };\n\n        RoadmapConfig.prototype.configSave = function() {\n            var phaseContainer = $('#phase-container');\n            var roadmapData = [];\n            let index = 0;\n            $.each(phaseContainer.find('.phase-wrapper .phase-configuration'), function() {\n                let phaseData = $(this).val();\n                if (phaseData == '') { phaseData = '{}'; }\n                let phaseDataObj = JSON.parse(phaseData);\n                phaseDataObj.index = index;\n                index = index + 1;\n                roadmapData.push(phaseDataObj);\n            });\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify({ phases: roadmapData,\n                phaseDeletes: $('#phase-deletes').val(),\n                cycleDeletes: $('#cycle-deletes').val(),\n                stepDeletes: $('#step-deletes').val()\n            }));\n        };\n\n        RoadmapConfig.prototype.addPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var config = JSON.parse($('input[name=\"roadmapconfiguration\"]').val());\n            var nextIndex = config.phases.length;\n            var newPhase = {id: 0, index: nextIndex, number: nextIndex+1};\n            config.phases.push(newPhase);\n            $('input[name=\"roadmapconfiguration\"]').val(JSON.stringify(config));\n\n            templates.render('mod_roadmap/configuration_phase', newPhase)\n                .then(function(html, js) {\n                    templates.appendNodeContents('#phase-container', html, js);\n\n                    $('.phase-collapse-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.collapsePhase(e); });\n\n                    $('.phase-delete-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.deletePhase(e); });\n\n                    $('#add-phase').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.addPhase(e); });\n\n                    $('.add-phase-cycle').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.addCycle(e); });\n\n                    phasesave.rebind_inputs();\n                    RoadmapConfig.prototype.bindConfigSave();\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseContainer = thisnode.closest('.phase-container');\n            var cycleContainer = phaseContainer.children('.phase-cycles-container');\n\n            var nextCycleIndex = cycleContainer.children('.cycle-wrapper').length;\n            var newCycle = {id: 0, index: nextCycleIndex, number: nextCycleIndex+1};\n\n            templates.render('mod_roadmap/configuration_cycle', newCycle)\n                .then(function(html, js) {\n                    templates.appendNodeContents(cycleContainer, html, js);\n\n                    $('.cycle-collapse-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.collapseCycle(e); });\n\n                    $('.cycle-delete-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.deleteCycle(e); });\n\n                    $('.add-cycle-step').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.addStep(e); });\n\n                    learningobjectives.refresh_checklists();\n                    cyclesave.rebind_inputs();\n                    phasesave.rebind_inputs();\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.addStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var stepsContainer = cycleContainer.children('.cycle-steps-container');\n\n            var nextStepIndex = stepsContainer.children('.step-wrapper').length;\n            var dtpdata = JSON.parse($('input[name=\"datetimepickerdata\"]').val());\n            var newStep = {\n                id: 0,\n                index: nextStepIndex,\n                number: nextStepIndex+1,\n                days: dtpdata.days,\n                months: dtpdata.months,\n                years: dtpdata.years,\n                hours: dtpdata.hours,\n                minutes: dtpdata.minutes,\n                stepicon: 'icon-10',\n            };\n\n            templates.render('mod_roadmap/configuration_step', newStep)\n                .then(function(html, js) {\n                    templates.appendNodeContents(stepsContainer, html, js);\n\n                    $('.step-collapse-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.collapseStep(e); });\n\n                    $('.step-delete-control').unbind('click')\n                        .click(function(e) { RoadmapConfig.prototype.deleteStep(e); });\n\n                    stepiconselect.rebind_buttons();\n                    stepactivityselect.rebind_buttons();\n                    stepsave.rebind_inputs();\n                    cyclesave.rebind_inputs();\n\n                }).fail(notification.exception);\n        };\n\n        RoadmapConfig.prototype.collapsePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var metadata = phaseWrapper.children('.phase-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var metadata = cycleWrapper.children('.cycle-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.collapseStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.step-wrapper');\n            var metadata = cycleWrapper.children('.step-container');\n            ec.expandCollapse(metadata, thisnode);\n        };\n\n        RoadmapConfig.prototype.deletePhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (confirm(\"Are you sure you want to delete this Phase?\")) {\n                var thisnode = $(event.currentTarget);\n                var phaseWrapper = thisnode.closest('.phase-wrapper');\n                var phaseId = phaseWrapper.data('phaseid');\n                $('#phase-deletes').val($('#phase-deletes').val() + phaseId + ',');\n                phaseWrapper.remove();\n                RoadmapConfig.prototype.configSave();\n            }\n        };\n\n        RoadmapConfig.prototype.deleteCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (confirm(\"Are you sure you want to delete this Cycle?\")) {\n                var thisnode = $(event.currentTarget);\n                var cycleWrapper = thisnode.closest('.cycle-wrapper');\n                var phaseContainer = thisnode.closest('.phase-container');\n                var cycleId = cycleWrapper.data('cycleid');\n                $('#cycle-deletes').val($('#cycle-deletes').val() + cycleId + ',');\n                cycleWrapper.remove();\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.deleteStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (confirm(\"Are you sure you want to delete this Step?\")) {\n                var thisnode = $(event.currentTarget);\n                var stepWrapper = thisnode.closest('.step-wrapper');\n                var cycleContainer = thisnode.closest('.cycle-container');\n                var stepId = stepWrapper.data('stepid');\n                $('#step-deletes').val($('#step-deletes').val() + stepId + ',');\n                stepWrapper.remove();\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var prevPhaseWrapper = phaseWrapper.prev();\n\n            phaseWrapper.insertBefore(prevPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.downPhase = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var phaseWrapper = thisnode.closest('.phase-wrapper');\n            var nextPhaseWrapper = phaseWrapper.next();\n\n            phaseWrapper.insertAfter(nextPhaseWrapper);\n            RoadmapConfig.prototype.configSave();\n        };\n\n        RoadmapConfig.prototype.upCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var prevCycleWrapper = cycleWrapper.prev();\n\n            if (prevCycleWrapper) {\n                cycleWrapper.insertBefore(prevCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downCycle = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var cycleWrapper = thisnode.closest('.cycle-wrapper');\n            var phaseContainer = thisnode.closest('.phase-container');\n            var nextCycleWrapper = cycleWrapper.next();\n\n            if (nextCycleWrapper) {\n                cycleWrapper.insertAfter(nextCycleWrapper);\n                phaseContainer.find('.phase-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.upStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var prevStepWrapper = stepWrapper.prev();\n\n            if (prevStepWrapper) {\n                stepWrapper.insertBefore(prevStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        RoadmapConfig.prototype.downStep = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var thisnode = $(event.currentTarget);\n            var stepWrapper = thisnode.closest('.step-wrapper');\n            var cycleContainer = thisnode.closest('.cycle-container');\n            var nextStepWrapper = stepWrapper.next();\n\n            if (nextStepWrapper) {\n                stepWrapper.insertAfter(nextStepWrapper);\n                cycleContainer.find('.cycle-title').triggerHandler(\"change\");\n            }\n        };\n\n        return {\n\n            /**\n             * Main initialisation.\n             *\n             * @param {String} inputSelector The hidden input field selector.\n             * @param {String} inputConfig The hidden input configuration.\n             * @return {LearningObjectivesConfig} A new instance of PhasesConfig.\n             * @method init\n             */\n            init: function(inputSelector, inputConfig) {\n                return new RoadmapConfig(inputSelector, inputConfig);\n            }\n        };\n    });\n"],"names":["define","$","notification","templates","ec","learningobjectives","stepiconselect","stepactivityselect","stepsave","cyclesave","phasesave","RoadmapConfig","inputSelector","inputConfig","configContainer","initForm","prototype","self","this","inputConfigVal","val","JSON","stringify","config","parse","each","phases","p","phase","number","index","configuration","cycles","c","cycle","steps","s","step","render","then","html","js","prependNodeContents","click","e","addPhase","addCycle","addStep","collapsePhase","collapseCycle","collapseStep","deletePhase","deleteCycle","deleteStep","upPhase","downPhase","upCycle","downCycle","upStep","downStep","refresh_checklists","rebind_buttons","rebind_inputs","bindConfigSave","require","fail","exception","unbind","change","configSave","bind","phaseContainer","roadmapData","find","phaseData","phaseDataObj","push","phaseDeletes","cycleDeletes","stepDeletes","event","preventDefault","stopPropagation","nextIndex","length","newPhase","id","appendNodeContents","cycleContainer","currentTarget","closest","children","nextCycleIndex","newCycle","stepsContainer","nextStepIndex","dtpdata","newStep","days","months","years","hours","minutes","stepicon","thisnode","metadata","expandCollapse","confirm","phaseWrapper","phaseId","data","remove","cycleWrapper","cycleId","triggerHandler","stepWrapper","stepId","prevPhaseWrapper","prev","insertBefore","nextPhaseWrapper","next","insertAfter","prevCycleWrapper","nextCycleWrapper","prevStepWrapper","nextStepWrapper","init"],"mappings":"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"}