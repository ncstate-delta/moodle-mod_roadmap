{"version":3,"file":"step_icon_select.min.js","sources":["../src/step_icon_select.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure scale data.\n *\n * @module     mod_roadmap/stepiconselect\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/notification', 'core/templates', 'core/ajax', 'mod_roadmap/dialogue'],\n    function($, notification, templates, ajax, Dialogue) {\n\n        var StepIconSelector = function() {\n\n        };\n\n        StepIconSelector.prototype.rebind_buttons = function() {\n            $('.btn_icon_selector').unbind('click').click(this.showConfig.bind(this));\n\n        };\n\n        StepIconSelector.prototype.showConfig = function(event) {\n            var self = this;\n            var iconsData = JSON.parse($('input[name=\"icon_data\"]').val());\n            self.clickedButton = event.target;\n\n            // Dish up the form.\n            templates.render('mod_roadmap/configuration_iconselect', iconsData)\n                .done(function(html) {\n                    new Dialogue(\n                        'Select Icon for Step',\n                        html,\n                        self.initIconConfig.bind(self)\n                    );\n                }).fail(notification.exception);\n        };\n\n        StepIconSelector.prototype.initIconConfig = function(popup) {\n            this.popup = popup;\n            var body = $(popup.getContent());\n            //if (this.originalscaleid === this.scaleid) {\n\n            //}\n            body.on('click', 'img.icon', function(e) {\n                let iconContainer = $(e.target).parent('.icon-container');\n                let iconName = iconContainer.data('iconname');\n                let stepId = $(this.clickedButton).data('stepid');\n                $('input[name=\"step-'+stepId+'-icon\"]').val(iconName).trigger('change');\n                $('input[name=\"step-'+stepId+'-icon\"]').parent('.step-icon-display').children('img').remove();\n                $('input[name=\"step-'+stepId+'-icon\"]').parent('.step-icon-display').append($(e.target));\n                popup.close();\n            }.bind(this));\n            body.on('click', '[data-action=\"cancel\"]', function() {\n                popup.close();\n            });\n        };\n\n        return {\n\n            /**\n             * Main initialisation.\n             *\n             * @return {ScaleConfig} A new instance of ScaleConfig.\n             * @method init\n             */\n            init: function() {\n                return new StepIconSelector();\n            },\n\n            rebind_buttons: function() {\n                StepIconSelector.prototype.rebind_buttons();\n            }\n        };\n});"],"names":["define","$","notification","templates","ajax","Dialogue","StepIconSelector","prototype","rebind_buttons","unbind","click","this","showConfig","bind","event","self","iconsData","JSON","parse","val","clickedButton","target","render","done","html","initIconConfig","fail","exception","popup","body","getContent","on","e","iconName","parent","data","stepId","trigger","children","remove","append","close","init"],"mappings":";;;;;;AAqBAA,sCAAO,CAAC,SAAU,oBAAqB,iBAAkB,YAAa,yBAClE,SAASC,EAAGC,aAAcC,UAAWC,KAAMC,cAEnCC,iBAAmB,oBAIvBA,iBAAiBC,UAAUC,eAAiB,WACxCP,EAAE,sBAAsBQ,OAAO,SAASC,MAAMC,KAAKC,WAAWC,KAAKF,QAIvEL,iBAAiBC,UAAUK,WAAa,SAASE,WACzCC,KAAOJ,KACPK,UAAYC,KAAKC,MAAMjB,EAAE,2BAA2BkB,OACxDJ,KAAKK,cAAgBN,MAAMO,OAG3BlB,UAAUmB,OAAO,uCAAwCN,WACpDO,MAAK,SAASC,UACPnB,SACA,uBACAmB,KACAT,KAAKU,eAAeZ,KAAKE,UAE9BW,KAAKxB,aAAayB,YAG7BrB,iBAAiBC,UAAUkB,eAAiB,SAASG,YAC5CA,MAAQA,UACTC,KAAO5B,EAAE2B,MAAME,cAInBD,KAAKE,GAAG,QAAS,WAAY,SAASC,OAE9BC,SADgBhC,EAAE+B,EAAEX,QAAQa,OAAO,mBACVC,KAAK,YAC9BC,OAASnC,EAAEU,KAAKS,eAAee,KAAK,UACxClC,EAAE,oBAAoBmC,OAAO,WAAWjB,IAAIc,UAAUI,QAAQ,UAC9DpC,EAAE,oBAAoBmC,OAAO,WAAWF,OAAO,sBAAsBI,SAAS,OAAOC,SACrFtC,EAAE,oBAAoBmC,OAAO,WAAWF,OAAO,sBAAsBM,OAAOvC,EAAE+B,EAAEX,SAChFO,MAAMa,SACR5B,KAAKF,OACPkB,KAAKE,GAAG,QAAS,0BAA0B,WACvCH,MAAMa,YAIP,CAQHC,KAAM,kBACK,IAAIpC,kBAGfE,eAAgB,WACZF,iBAAiBC,UAAUC"}