define ("mod_roadmap/learningobjectivesconfig",["jquery","core/notification","core/templates"],function(a,b,c){var d=function(b,c){this.inputSelector=a(b).parent();this.configContainer=a(c);this.showConfig(this)};d.prototype.showConfig=function(){var e=this,f=JSON.parse(this.configContainer.val());c.render("mod_roadmap/configuration_learningobjectives",f).then(function(f,g){c.prependNodeContents(e.inputSelector,f,g);a(".learning-objective-name").change(function(){d.prototype.saveConfig()});a("#add-learning-objective").click(function(f){f.preventDefault();var e=a("#learningobjective-container").children(".learningobjective").length;c.render("mod_roadmap/configuration_learningobjective",{id:e,number:e+1}).then(function(b,e){c.appendNodeContents("#learningobjective-container",b,e);d.prototype.saveConfig();a(".learning-objective-name").unbind("change").change(function(){d.prototype.saveConfig()})}).fail(b.exception)})}).fail(b.exception)};d.prototype.saveConfig=function(){var b=[];a("#learningobjective-container").children(".learningobjective").each(function(c){var d=a("#learningobjective-container").children(".learningobjective")[c],e=a(d).data("id"),f=a(d).find("input.learning-objective-name").val();b.push({index:c,id:e,name:f})});a("#id_learningobjectivesconfiguration").val(JSON.stringify({learningobjectives:b}));d.prototype.refreshChecklists()};d.prototype.refreshChecklists=function(){var b=JSON.parse(a("#id_learningobjectivesconfiguration").val()),c=a(".chk-learning-objectives");a(c).each(function(c,d){var e=a(this).children("li").map(function(b,c){var d=a(c).data("id");if(a(c).children("input[type=\"checkbox\"]").is(":checked")){return d}else{return null}});a(d).empty();b.learningobjectives.forEach(function(b){var c=a("<li/>").attr("data-id",b.id).appendTo(a(d));a("<input/>").attr("type","checkbox").attr("checked",0<=a.inArray(b.id,e)).appendTo(c);a("<span>").text(b.name).appendTo(c)})})};return{init:function init(a,b){return new d(a,b)},refresh_checklists:function refresh_checklists(){d.prototype.refreshChecklists()}}});
//# sourceMappingURL=learningobjectivesconfig.min.js.map
