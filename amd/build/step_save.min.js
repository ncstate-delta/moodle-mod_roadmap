/**
 * Handle opening a dialogue to configure scale data.
 *
 * @module     mod_roadmap/stepsave
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/step_save",["jquery"],(function($){var StepSave=function(){};return StepSave.prototype.rebindInputs=function(){$(".roadmap-form-control-step").unbind("change").change(this.saveStep.bind(this)),StepSave.prototype.saveStep(this)},StepSave.prototype.saveStep=function(event){var stepContainer=$(event.target).closest(".step-container"),expectedComplete=0;1==stepContainer.find(".completionexpected").prop("checked")&&(expectedComplete=1);var linksingleactivity=0;1==stepContainer.find(".fitem input.chk-single-activity-link").prop("checked")&&(linksingleactivity=1);let rollovertext=stepContainer.find(".fitem input.step-rollovertext").val();var stepData={id:stepContainer.closest(".step-wrapper").data("stepid"),rollovertext:rollovertext,stepicon:stepContainer.find(".fitem input.step-icon").val(),completionmodules:stepContainer.find(".fitem input.step-completion-modules").val(),linksingleactivity:linksingleactivity,pagelink:stepContainer.find(".fitem input.step-single-activity-link").val(),expectedcomplete:expectedComplete,completionexpectedday:stepContainer.find(".fitem select.completionexpectedday").val(),completionexpectedmonth:stepContainer.find(".fitem select.completionexpectedmonth").val(),completionexpectedyear:stepContainer.find(".fitem select.completionexpectedyear").val(),completionexpectedhour:stepContainer.find(".fitem select.completionexpectedhour").val(),completionexpectedminute:stepContainer.find(".fitem select.completionexpectedminute").val()};delete stepData.days,delete stepData.months,delete stepData.years,delete stepData.hours,delete stepData.minutes,stepContainer.closest(".step-wrapper").find(".step-header-title").html(rollovertext),stepContainer.children("input.step-configuration").val(JSON.stringify(stepData)).triggerHandler("change")},{init:function(){return new StepSave},rebindInputs:function(){StepSave.prototype.rebindInputs()}}}));

//# sourceMappingURL=step_save.min.js.map