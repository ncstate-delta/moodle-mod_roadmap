{"version":3,"sources":["../src/cycle_save.js"],"names":["define","$","CycleSave","prototype","rebind_inputs","unbind","change","saveCycle","bind","event","cycleContainer","target","closest","cycleLos","each","find","prop","push","val","cycleSteps","stepData","JSON","parse","cycleData","title","subtitle","pagelink","learningobjectives","join","steps","children","stringify","triggerHandler","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure scale data.\n *\n * @module     mod_roadmap/stepiconselect\n * @package    mod_roadmap\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'],\n    function($) {\n\n        var CycleSave = function() {\n\n        };\n\n        CycleSave.prototype.rebind_inputs = function() {\n\n            $('.cycle-title').unbind('change').change(this.saveCycle.bind(this));\n            $('.cycle-subtitle').unbind('change').change(this.saveCycle.bind(this));\n            $('.cycle-pagelink').unbind('change').change(this.saveCycle.bind(this));\n            $('.chk-learning-objectives input[type=\"checkbox\"]').unbind('change').change(this.saveCycle.bind(this));\n            $('.cycle-steps-container .step-wrapper .step-configuration').unbind('change').change(this.saveCycle.bind(this));\n            CycleSave.prototype.saveCycle(this);\n        };\n\n        CycleSave.prototype.saveCycle = function(event) {\n\n            var cycleContainer = $(event.target).closest('.cycle-container');\n            var cycleLos = [];\n            $.each(cycleContainer.find('.chk-learning-objectives input[type=\"checkbox\"]'), function(){\n                if($(this).prop(\"checked\") == true){\n                    cycleLos.push($(this).val());\n                }\n            });\n\n            var cycleSteps = [];\n            $.each(cycleContainer.find('.cycle-steps-container .step-wrapper .step-configuration'), function() {\n                let stepData = $(this).val();\n                if (stepData == '') { stepData = '{}'; }\n                cycleSteps.push(JSON.parse(stepData));\n            });\n\n            var cycleData = {\n                title: cycleContainer.find('.fitem input.cycle-title').val(),\n                subtitle: cycleContainer.find('.fitem input.cycle-subtitle').val(),\n                pagelink: cycleContainer.find('.fitem input.cycle-pagelink').val(),\n                learningobjectives: cycleLos.join(\",\"),\n                steps: cycleSteps,\n            };\n            cycleContainer.children('input.cycle-configuration').val(JSON.stringify(cycleData)).triggerHandler(\"change\");\n        };\n\n        return {\n\n            init: function() {\n                return new CycleSave();\n            },\n\n            rebind_inputs: function() {\n                CycleSave.prototype.rebind_inputs();\n            }\n        };\n    });"],"file":"cycle_save.min.js"}