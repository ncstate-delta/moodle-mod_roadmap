/**
 * Handle opening a dialogue to configure scale data.
 *
 * @module     mod_roadmap/stepiconselect
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/step_icon_select",["jquery","core/notification","core/templates","core/ajax","mod_roadmap/dialogue"],(function($,notification,templates,ajax,Dialogue){var StepIconSelector=function(){};return StepIconSelector.prototype.rebindButtons=function(){$(".btn_icon_selector").unbind("click").click(this.showConfig.bind(this))},StepIconSelector.prototype.showConfig=function(event){var self=this,iconsData=JSON.parse($('input[name="icon_data"]').val());self.clickedButton=event.target,templates.render("mod_roadmap/configuration_iconselect",iconsData).done((function(html){new Dialogue("Select Icon for Step",html,self.initIconConfig.bind(self))})).fail(notification.exception)},StepIconSelector.prototype.initIconConfig=function(popup){this.popup=popup;var body=$(popup.getContent());body.on("click","img.icon",function(e){let iconName=$(e.target).parent(".icon-container").data("iconname"),stepId=$(this.clickedButton).data("stepid");$('input[name="step-'+stepId+'-icon"]').val(iconName).trigger("change"),$('input[name="step-'+stepId+'-icon"]').parent(".step-icon-display").children("img").remove(),$('input[name="step-'+stepId+'-icon"]').parent(".step-icon-display").append($(e.target)),popup.close()}.bind(this)),body.on("click",'[data-action="cancel"]',(function(){popup.close()}))},{init:function(){return new StepIconSelector},rebindButtons:function(){StepIconSelector.prototype.rebindButtons()}}}));

//# sourceMappingURL=step_icon_select.min.js.map