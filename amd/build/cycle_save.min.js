/**
 * Handle the saving of cycle data and rebinding of inputs.
 *
 * @module     mod_roadmap/stepiconselect
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/cycle_save",["jquery"],(function($){var CycleSave=function(){};return CycleSave.prototype.rebindInputs=function(){$(".cycle-title").unbind("change").change(this.saveCycle.bind(this)),$(".cycle-subtitle").unbind("change").change(this.saveCycle.bind(this)),$(".cycle-pagelink").unbind("change").change(this.saveCycle.bind(this)),$('.chk-learning-objectives input[type="checkbox"]').unbind("change").change(this.saveCycle.bind(this)),$(".cycle-steps-container .step-wrapper .step-configuration").unbind("change").change(this.saveCycle.bind(this)),CycleSave.prototype.saveCycle(this)},CycleSave.prototype.saveCycle=function(event){var cycleContainer=$(event.target).closest(".cycle-container"),cycleLos=[];$.each(cycleContainer.find('.chk-learning-objectives input[type="checkbox"]'),(function(){1==$(this).prop("checked")&&cycleLos.push($(this).val())}));var cycleSteps=[];$.each(cycleContainer.find(".cycle-steps-container .step-wrapper .step-configuration"),(function(){let stepData=$(this).val();""==stepData&&(stepData="{}"),cycleSteps.push(JSON.parse(stepData))}));let title=cycleContainer.find(".fitem input.cycle-title").val();var cycleData={id:cycleContainer.closest(".cycle-wrapper").data("cycleid"),title:title,subtitle:cycleContainer.find(".fitem input.cycle-subtitle").val(),pagelink:cycleContainer.find(".fitem input.cycle-pagelink").val(),learningobjectives:cycleLos.join(","),steps:cycleSteps};cycleContainer.closest(".cycle-wrapper").find(".cycle-header-title").html(title),cycleContainer.children("input.cycle-configuration").val(JSON.stringify(cycleData)).triggerHandler("change")},{init:function(){return new CycleSave},rebindInputs:function(){CycleSave.prototype.rebindInputs()}}}));

//# sourceMappingURL=cycle_save.min.js.map