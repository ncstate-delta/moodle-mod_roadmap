/**
 * Handle the saving of cycle data and rebinding of inputs.
 *
 * @module     mod_roadmap/cycle_save
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_roadmap/cycle_save",["jquery"],(function($){const instance=new class{rebindInputs(){$(".cycle-title").off("change").on("change",this.saveCycle.bind(this)),$(".cycle-subtitle").off("change").on("change",this.saveCycle.bind(this)),$(".cycle-pagelink").off("change").on("change",this.saveCycle.bind(this)),$('.chk-learning-objectives input[type="checkbox"]').off("change").on("change",this.saveCycle.bind(this)),$(".cycle-steps-container .step-wrapper .step-configuration").off("change").on("change",this.saveCycle.bind(this)),$(".cycle-container").each(((_,el)=>{this.saveCycle({target:el})}))}saveCycle(event){const cycleContainer=$(event.target).closest(".cycle-container"),cycleLos=[];cycleContainer.find('.chk-learning-objectives input[type="checkbox"]').each((function(){$(this).prop("checked")&&cycleLos.push($(this).val())}));const cycleSteps=[];cycleContainer.find(".cycle-steps-container .step-wrapper .step-configuration").each((function(){let stepData=$(this).val()||"{}";cycleSteps.push(JSON.parse(stepData))}));const title=cycleContainer.find(".fitem input.cycle-title").val(),cycleData={id:cycleContainer.closest(".cycle-wrapper").data("cycleid"),title:title,subtitle:cycleContainer.find(".fitem input.cycle-subtitle").val(),pagelink:cycleContainer.find(".fitem input.cycle-pagelink").val(),learningobjectives:cycleLos.join(","),steps:cycleSteps};cycleContainer.closest(".cycle-wrapper").find(".cycle-header-title").html(title),cycleContainer.children("input.cycle-configuration").val(JSON.stringify(cycleData)).triggerHandler("change")}};return{init:function(){return instance},rebindInputs:function(){instance.rebindInputs()}}}));

//# sourceMappingURL=cycle_save.min.js.map