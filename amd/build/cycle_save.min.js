define ("mod_roadmap/cycle_save",["jquery"],function(a){var b=function(){};b.prototype.rebind_inputs=function(){console.log("CycleSave.prototype.rebind_inputs");a(".cycle-title").unbind("change").change(this.saveCycle.bind(this));a(".cycle-subtitle").unbind("change").change(this.saveCycle.bind(this));a(".cycle-pagelink").unbind("change").change(this.saveCycle.bind(this));a(".chk-learning-objectives input[type=\"checkbox\"]").unbind("change").change(this.saveCycle.bind(this));a(".cycle-steps-container .step-wrapper .step-configuration").unbind("change").change(this.saveCycle.bind(this));b.prototype.saveCycle(this)};b.prototype.saveCycle=function(b){console.log("CycleSave.prototype.saveCycle");var c=a(b.target).closest(".cycle-container"),d=[];a.each(c.find(".chk-learning-objectives input[type=\"checkbox\"]"),function(){if(!0==a(this).prop("checked")){d.push(a(this).val())}});var e=[];a.each(c.find(".cycle-steps-container .step-wrapper .step-configuration"),function(){var b=a(this).val();if(""==b){b="{}"}e.push(JSON.parse(b))});var f={title:c.find(".fitem input.cycle-title").val(),subtitle:c.find(".fitem input.cycle-subtitle").val(),pagelink:c.find(".fitem input.cycle-pagelink").val(),learningobjectives:d.join(","),steps:e};c.children("input.cycle-configuration").val(JSON.stringify(f)).triggerHandler("change")};return{init:function init(){return new b},rebind_inputs:function rebind_inputs(){b.prototype.rebind_inputs()}}});
//# sourceMappingURL=cycle_save.min.js.map
